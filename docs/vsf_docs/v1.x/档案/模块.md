# æ¨¡å—

æé†’

è¿™ä»½æ–‡ä»¶æ˜¯*å­˜æ¡£*å’Œ*ä¸*å…·æœ‰è¿™æ˜¯æœ€æ–°ç‰ˆæœ¬çš„æœ‰å…³`1.11`åœ¨å†™ä½œçš„æ—¶é—´ã€‚è¯·è®°ä½ï¼Œæœ¬æ–‡æ¡£æ—¨åœ¨å¸®åŠ©æ‚¨ç»´æŠ¤æ—§äº§å“ï¼Œè€Œä¸æ˜¯å…¨æ–°å®‰è£…ã€‚

## [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#introduction)ä»‹ç»

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#table-of-contents)ç›®å½•

**ä»‹ç»å’ŒåŠ¨æœº**

- [ä»€ä¹ˆæ˜¯ VS æ¨¡å—](https://docs.vuestorefront.io/v1/guide/archives/modules.html#what-are-vs-modules)
- [åŠ¨æœº](https://docs.vuestorefront.io/v1/guide/archives/modules.html#motivation)
- [VS æ¨¡å—çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ](https://docs.vuestorefront.io/v1/guide/archives/modules.html#what-is-the-purpose-of-vs-modules)

**æŠ€æœ¯éƒ¨åˆ†**

- [æ¨¡å—é…ç½®åŠå…¶åŠŸèƒ½](https://docs.vuestorefront.io/v1/guide/archives/modules.html#module-config-and-capabilities)
- [æ¨¡å—æ–‡ä»¶ç»“æ„](https://docs.vuestorefront.io/v1/guide/archives/modules.html#module-file-structure)
- [æ¨¡å—æ³¨å†Œ](https://docs.vuestorefront.io/v1/guide/archives/modules.html#module-registration)

**å¸¸è§ç”¨ä¾‹çš„æ¨¡å¼å’Œè‰¯å¥½å®è·µ**

- [ä¸€èˆ¬è§„åˆ™å’Œè‰¯å¥½åšæ³•](https://docs.vuestorefront.io/v1/guide/archives/modules.html#general-rules-and-good-practices)
- [æ·»åŠ æ–°åŠŸèƒ½ä½œä¸º VS æ¨¡å—](https://docs.vuestorefront.io/v1/guide/archives/modules.html#adding-new-features-as-vs-modules)
- [æ‰©å±•å’Œè¦†ç›– Vue Storefront æ¨¡å—](https://docs.vuestorefront.io/v1/guide/archives/modules.html#extending-and-overriding-vue-storefront-modules)
- [åˆ›å»ºç¬¬ä¸‰æ–¹æ¨¡å—](https://docs.vuestorefront.io/v1/guide/archives/modules.html#Creating-3rd-party-modules)

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#what-are-vs-modules)ä»€ä¹ˆæ˜¯ VS æ¨¡å—ï¼Ÿ

æ‚¨å¯ä»¥å°†æ¯ä¸ªæ¨¡å—è§†ä¸º Vue Storefront ä¸­å¯ç”¨çš„ä¸€ä¸ªç‹¬ç«‹åŠŸèƒ½ï¼Œå…¶ä¸­åŒ…å«å…¶æ‰€æœ‰é€»è¾‘å’Œä¾èµ–é¡¹ã€‚ç„¶è€Œï¼Œè¿™ä¸€*ç‰¹å¾*æ˜¯ä¸€ä¸ªå…±åŒç‚¹ï¼Œå®ƒå°†å†…éƒ¨çš„æ‰€æœ‰ç‰¹å¾è”ç³»èµ·æ¥ã€‚ä¾‹å¦‚ï¼Œå°†äº§å“æ·»åŠ åˆ°è´­ç‰©è½¦ã€æ¥æ”¶è´­ç‰©è½¦ä¸­çš„å•†å“åˆ—è¡¨æˆ–åº”ç”¨è´­ç‰©è½¦ä¼˜æƒ åˆ¸çš„å…¬åˆ†æ¯æ˜¾ç„¶æ˜¯ a`cart`å¹¶ä¸”`cart`ä¸æ˜¯ä»»ä½•å¤§äºå…¶è‡ªèº«çš„ç‰¹å¾ï¼ˆå…¶å…¬åˆ†æ¯æ˜¯å•†åº—ï¼‰æ‰€ä»¥å®ƒåº”è¯¥æ˜¯ä¸€ä¸ªæ¨¡å—ã€‚Wishlistã€Reviews æˆ– Newsletter ä¹Ÿæ˜¯è¯¥æ¨¡å—çš„å¥½ä¾‹å­ï¼Œå› ä¸ºæˆ‘ä»¬ç›´è§‚åœ°å°†å®ƒä»¬è§†ä¸ºç‹¬ç«‹çš„åŠŸèƒ½ã€‚

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#motivation)åŠ¨æœº

æˆ‘ç›¸ä¿¡ä¸€ä¸ªæ˜æ˜¾çš„æ¯”å–»å¯ä»¥æ¸…æ¥šåœ°æè¿°é—®é¢˜ï¼ŒåŒæ—¶ï¼Œè§£å†³æ–¹æ¡ˆã€‚

ä¸ºäº†æ›´å¥½åœ°è¯´æ˜æ•´ä¸ªæ¦‚å¿µï¼Œæˆ‘å°†å°è¯•ç”¨ä¹é«˜ç§¯æœ¨æ¥è§£é‡Šå®ƒã€‚

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè£…æœ‰ 90 å—ä¹é«˜ç§¯æœ¨çš„ç›’å­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥å»ºé€ ä¸€äº›å¥‡ç‰¹çš„ä¸œè¥¿ï¼Œä¾‹å¦‚å¡”ã€åŸå ¡æˆ–ç›´å‡æœºã€‚ä¸å¹¸çš„æ˜¯ï¼Œç”±äºä¸€äº›æ„šè ¢çš„æ¬§ç›Ÿè§„å®šï¼Œæˆ‘ä»¬çš„ç›’å­é‡Œåªèƒ½æœ‰ 3 ç§ä¸åŒé¢œè‰²çš„ç§¯æœ¨ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œå¯¹äºå¯ä»¥å»ºé€ çš„æ¯ä¸ªç»“æ„ï¼Œå¹¶éæ¯ç§é¢œè‰²éƒ½æ˜¯å‡†ç¡®çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸æ—¶åœ°åœ¨å•†åº—ä¸­å°†ä¸€ç§é¢œè‰²ä¸å¦ä¸€ç§é¢œè‰²äº¤æ¢ï¼Œä»¥ä¾¿è·å¾—æœ€é€‚åˆæˆ‘ä»¬ä¸‹ä¸€ä¸ªä¹é«˜é¡¹ç›®çš„é¢œè‰²çš„ç§¯æœ¨.

å¾ˆé…·ï¼Œä½†æœ‰ä¸€ä¸ªé—®é¢˜â€”â€”å› ä¸ºæˆ‘ä»¬æŠŠæ‰€æœ‰çš„ç§¯æœ¨éƒ½æ”¾åœ¨ä¸€ä¸ªç›’å­é‡Œï¼Œå®ƒä»¬çœ‹èµ·æ¥æˆ–å¤šæˆ–å°‘å¦‚ä¸‹ï¼š

![ä¹é«˜](https://docs.vuestorefront.io/v1/assets/img/pile_of_legos.8c6300ed.png)

å½“æˆ‘ä»¬æƒ³ç”¨é»‘è‰²çš„ç –å—æ›¿æ¢ç»¿ç –æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ‰€æœ‰å…¶ä»–ç –å—ä¸­åˆ†åˆ«å¯»æ‰¾æ¯å—ç»¿ç –ï¼Œè¿™ä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´......è€Œä¸”æˆ‘ä»¬ä»ç„¶æœ‰å¯èƒ½ä¼šé”™è¿‡ä¸€äº›å…¶ä¸­ï¼æ›´ä¸ç”¨è¯´æ‰¾åˆ°æˆ‘ä»¬æ­£åœ¨å»ºé€ çš„æ£•æ¦ˆæ ‘æ‰€éœ€çš„ç‰¹å®šç»¿è‰²ç –å— ( ![è¿™ä¸ªï¼](data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxIQEBUQEBAWFhUVFhUVFxUYFRcVGBcVFRUWFxYVFxUYHSggGBolHRUVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDg0OGhAQGi0lHyUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLf/AABEIAMIBAwMBEQACEQEDEQH/xAAbAAEAAQUBAAAAAAAAAAAAAAAAAQIDBAUGB//EAEQQAAIBAgIHBAgCBgkFAQAAAAABAgMRBCEFBhIxQVFxYYGRoQcTIjJCscHRFFIjQ2JygpIzY4OissLS8PEWF1OT4RX/xAAaAQEAAwEBAQAAAAAAAAAAAAAAAQIDBAUG/8QAMREBAAICAAUBBwMDBQEAAAAAAAECAxEEEiExQVEFIjJhcYGRE0KxI1KhFDPB0fAV/9oADAMBAAIRAxEAPwD2oAACQAAABAACQAAAAAAAAACAJAAAAACAAEgAAEFgDQEBIBIQBIACAJAAQBIAAAAAAAAAAAAAIAkAAAAAIAMTSWk6OGjt16kYLteb6R3sra9a95UyZK443adOD0z6RJSexhaewr+/Ozk7cobl3nLfiJn4Xm5PaEz/ALcfeXB6c09iqtV7dSUtzvJ3Wf5Y7l3IynntO9ueJyZY5rWZGrmumJw9aMNt2fwXvB8bOL3ZXzWYrfJSe61cmTF1iej2bQGnaWMheGU4pbUHvV1dNc0+Z3UyReOj1sOeuWNx3bS5dskAAAAAAAAAAAAAAAAAAAAAAACAAAAAY2Px9LDx261SMF2732Jb2+hW1orG5UtetOtpcFp/0jrOGGtTTvarU3vtjBXt1Zy34n+15+Xj5npjj7z/AMOMrV5V3KpKt62XGTntPwe5HP367eZeL296Z39Wr0lSlKN4+9F3XcT3jSMdo3qShpGlUSVaLTTzsvoxuY7tfepPTsvqOFhL1kW2+F1n3K7sxM7LWtaO7pNRsXU/H0pJW25bMordsOLy7rJ9xfFOskaacLeYz109iPRiHvaCACQAAAAAAAAAAAAFgJAAQAAwNN6WpYOi61ZvZuopJXlKT3RS55PwKXvFI3LLNlrirzWcbiPSW/1eE/nqf6Uc88V6Q8+3tP0qwKnpGxT92lRXdKX1K/6i/wAmU+0snpC1/wBw8byo/wDrl/qI/wBRk+Sv/wBHN6R/n/tdp+kbFL3qdJrpKP1JjiL/ACTHtLJ6Q2uj/SRBu2IoOK/NB7dusXZ+BevFdfehvj9pVmffjX+WPpv0iN3jg6dv6yaz6xh9yt+JmfhUze0vGOPvLgNK6UqSl66tOVSW1nKTvZPly6KxhM76z1cHNbJMzadyxsRgPXfpYe1klluW/Mtj5Za4LViJi0MHBaOrKvtKDUU823vXK3ErbS2S+PlnTcZXa5EOKYU1MLTm7ygm+e5+KHN6prkmF7CaKi3eEEv2nnbxG99lo58nwvQ9QtBbD/Ey4XjDrulLodWDFMe9L1+B4Xk9+3d21zrelra4QAAAAAkAAAgCQAEASAAAAACwQ0mt2gvx2HVH1vqpRmpxlZNXSas096zZllpzxpjnxRlryy820jqRj6P9G6GIX7NSNOXhNpeZyTgvDzL+z7R2nbn8Xt0ZbFejUpy32aurdjW9Gc7jvDjvhtSdShSTV0QxlNyRMWQhfoxvko7T5ZvyRPRaI+SxiaUZppqyfDOxO9HNyzuGupYOtSf6Kd112X5kcu+0tv1K2+TMdXFTVpu3a2m/InXqiZiI6yysFgZWsllzeRG5npDOIteekNlTwUYe9m3uW5f8F64Znu7MPAWnrZlYKlKrUjBvK/uxy8zauOXfj4aY7vU8BQVOnGKVklZI64jTuiIiNQyAleAAAAACQAACAJAgCQMLG6Xw9D+mxFOHY5pPw3lLZK17yzvlpT4p00WM1/wUPclOo/2INLxlYzniKeHNfj8Mdp39GmxXpM/8WE75zt5RTM54qfEOa3tOP21anE+kLGz9z1VPpDafjJteRnPEZJYW9pZp7ahrq2tmOn72LqfwqEP8MUUnJef3MZ4zPP7v4YVXSuIn7+Iqv+0l9yNz6yznPknvaWNOvKXvTk+spP5sqpOS0+Z/MqJK40je0LLcSgkCVIVXKVJvoIhMRMr8ack7wlu3Z2ZOl+WfCzKEr3aIUna9h6Lm7Ij6FazadQzqdCEXZvaly4LqaRj69XZj4WP3JxdWcZLZ9y2XX7G0V14epiw1r4bHRmia2Ia9lpc2axEy6XbaD1chQ9p5y5s0iul9N/YsJ2QlcAAAAEgAAAAAAIDxnWDWHE161SM60oxU5xVOLcFFKTSWWbdlxPOyZLTM7eDxOfLN5iZ6NDbj57/MzcPkJBgAguAuE7AhAEhIs8lmDe+zIp4a2ci0Qvya7riQSqbsBN3zJNyroWi7235dU+ZXtO1sVopeLMvR2jJ1ZpRi7X4ZI64pHiHv1x1ifdh3ej9WYpJ1M2uBtytYh0GHw0YK0VYslkKIFSQEgAlIAAAAAAAACGBiaRnUVNukryA801qxEUtuthlKTeb2XGXW6MbRE94ZXpW3eHD4jH00/ZjOPZe6819TmmlfDiycJint0WlpNc0+qcX4lJpPiXHfgp/bK9DSEOKa7feXiis7jvDntw948L9OvCXuzT78yNwymswrcbbwjSLkoSkBDAu0KDl2Ln9iYja1aTLMgtlbK7+fey0dGsdOkJS5gUtEITCDbyt1bSXiydGtoaIQqSyyInsrMbh63oXDQVGnOKS2qcJd7imz0afDH0fTY7c1Kz8obNIsuqUQKrASBAEhIAAAAAAABE3ZXbsubdkJnSJlq8TrFg6eU8VST5KSk/7tyk5KR5ZWz4q97R+WsxGveBjuqTl+7TfzZnPEUYW4/BXy0ukNfcNUWz+DnUX7bhH7spPEx/axn2lTxWXF6WxOHrNuGDVP+0cv8qM5zb/awv7SnxSPy0s9G029zXRmfNLCePyT4hC0VS/a/mI5pVnjcvy/B/8Al0uUv5mRtSeIvPf+IZOHoqmrRb75NhlN5nuuJhUuEsmjhuM8lyvm+vItFWkU8yvyfhuS4EpmUATewNoRCEVKalFqSyYiImdS0w1i2WtZ7LeCvsuLzcHs9V8L8CIjXT0MmPktNfRkUxPZm9e0FG2FoL+qh/hR6GL4I+j6LBH9Kv0hsoou1VAAAAJAAAAAAAcbrTrnPDVpUKFOMpRttTm27Nq9lFb96zbMMmblnUODieMnHblrDjcbrfjql74hxXKEVFeO85py3nvLzr8Zmt519GjxFaVV3qTlN85ycvmzOerlte1vinf1W0RpVKJEsAwSpCEASAQSnZbdkr3B1ZtGhGNm1eXL4V92XiNNa1iOvlU3dkp7kUQhLQFLQQhdALi3MV+KG3D/AO7X6sefs1Iz4S9iX+V/MnLGpizq42na/wCWZTptvLPguryRSXBMej2WjS2IRh+WMY/ypI9KI1Gn0ta6iIX4EpVAAASAAAAAAsBS78Ah5Trro7EQqOs8PKe03tyi8stz3PgcuXH125c/DVyTzOSWkqe6V49kl9Vc55q4L8HKqM4yzi79GmRqXLfh71ItPJNX5FWHLKq1iUITJShhEoIQAEEwvUaDl2Ln9iYiZWrXbLSsrIv2a9hEKlgIQRtN0E7AGQGZozDetlKK/JJ9yLY43eHTwcc2aPuxpYfa/RvK7t0fBmtq80aepenPWaz5ddqvq/WdSE6ypqMGpXWbm17vnZkY8VtxzdnLg4O8Xib61DvWdb1FcAhUACQAAAAAAAAAaCGk0vqnhMUn6ygk/wA0VssrNInuiYiXnWsXo4p07yo4qmrfDKcYyXmY2xx4ljetI8w4jE4CvB2Uo1Ldql5//TnnUeXDkvgjvaPsppU8St0bfxq3gykxXw5LW4ee0z+GZRlXyU4wfbtZkalhMU8TP4ZTJZoIQlBLIo4db5+H3JivmV619WRN/wDBaV5lVa2RJoYBO+RAwMDpNV51I7EYunJpKKayTt4jrvUrXrMamfMMxIKKrMGpQkEOq1Cw23Vqt8Kdv5ml9DXh/jn6O/2dH9S0/JZ0vouUMQmk7Sf1NprqXqzHV3+jqGzBdDWIWhlkpXIgSEgAAAAAAInJRV5NJc27LxYRM6aLSGuOCo3Trbcl8NNObvyusl3tGVs1K+XNk4vFTvP4c7jvSVwoYbvqSS/uxv8AMynifSHJf2l/bX8tFjNecdU3VY01yhBX8ZXMpzXnzpy34/Nbzpo8TpOvV/pMRVn2SqTa8L2MpmZ7zLmtmyW72n8sR232I1DKevcuSRKbhKLgAK6dFy3DSYrtl06aj2vmWiGkREK0SJe8EiAi4JVUt/yCHIYfEeqx1SXB1aifRyYt2iXbkrvFE+jsHFdxLk6JcuoJUXuVQ730dYO1KrVe+UlTXSKUn5y8jp4avSZep7NpqtrT5n+HV/h4yd3FM6XpMmwEWAqABIAAAAAGt1h0g8PhqlWNtpK0b7tp5K5W86rMs8lprSZh49pHG18Q9qtVlP8AelkukVku5HnTaZ7vn8uTJf4pYOYYouEIkQiUWCEWAkJLALAZFOhxlkvn9iYheK+rIWSyVkWW7dkXG0bSmAQIVNhKm3IhCunlmx4Gi1o0Q6GJ3ZVNmSy4ySb+Ztauvu9qceoj6Q2+GTitiXvQyfanmn4GOuWZrLyclP07zX07LoUTFXYJer6r4b1WEpRas2nN9Zva+qO3DXVIh73C05cVYn/224po1dCsCAASAAAAAAAs4vCwqwdOpFSjJWafET1RPVxmlPR1F3eFxDhyhUXrI9NrKS8WY2wxPZhfh6WcbpbQGOwt3VwjnBfrKMlNW7YvNGE4ZhyX4GPDRrSNG9nLZfKalB9M8vMzmmnLbg5hVLEQ33y5714orMTDmvhtHhMJRfuyT6EbZaTJko2ggVRg5OyV2ExG+zMpYZRzecvJfcvEaaxWIVSYRMqW+0hXahshG0fi6e36m79Zbad7bNuCXG+8bX17u1za7e4lUAqQTC9hqW01Hm0vF2+oWiNzr6Ox9IGgVVpqcY+1BxfcrHdkruH0V67hy2lsPsuFVclCX+VnNmr+55vHY+kX9GEzJ5rN0RhXVrU6a+OcY91/afcrvuFY3MQvjpzXrX1l7CklktyyXRbj0n0i5ACpgAkAgAAAAAAAISgMDSOmMPhlevXhDsbW0+kVm+5FLXrXvLO+WmP4p04DWfT2i8SmvwbqvP27eq89/kYWzUntG3Hk9oYv2xt57LRdDbcowlFXyipyt3tWuYTf0efk429u0RDJp0Yx92KV99t76sq5rXtbvKphVew9Byz3Ln9hEbXrWbMymksorv59WXa9uwEbUtFVZUPkFZUkKua07VdPHRqJPKMF1te/zLa9zTuxU5sExrzLp4yuk7ZPNMrDjTFdhJCqCV833BMRDbatUNvFUY23zT7o+0/kWpG7RDfh682WsfN6lXoqas0ehL6Bw2ndHWlOm1lK9voY3ruJhjkpFqzWfLkthrJqzWT6r/aOPU6eBNJrOpdn6P8AR96kq8llBWj+89/l8zfh67nb0fZ+PczefDu0jreougAkAAAlAQAAAQt4ivGnFzqTjCK3yk1FLq2RM67omYiNzLktL+kLD0/Zw8XWlzzjD+Zq77kYW4isdurhy+0Mdfh6/wAflxeldcsZiLp1fVxfwUlsrvldyfijntmvPl52Tjs1+06+jQSld3ebe9t3b6tmTkmdzuUXJQXAnsWbB9GXSwyWct/kWiG0V13X7+BZaZRcI2lxIEMhCLeIRpRGNyJViGfrdq25YDDYiMfaSvL92c2/qjpiv9OJh7mCn9Cn5/LCeHdKTp8LKUej3+DML15baebxOKaZOnaUIq5kpcwOt9HuF2sTKdsqdNv+KTUV5bRtw8bvt3ez6byzPpH8vQ4LM7XtNRrLgduG2lnHPuK2jaJjbhNI4NxqKcUnGVlsu/vd1jkyUne4ebxHDXtbmo9B1ewPqMPGD95+1Lq/9o6sdOWundgxfp0irawRdqqABIAABKAgAAa7WHSLw2GqVopOUV7Ke5yeSuVvOqzMM8tprSbR4ePaXxuIxD9ZXnKeeX5U3wUFknv8Dz7Wm3WXgZsmTJ1u1sijnmVFwoBAErtKi5cMuZMQtFZllU4Wdly38fEtppEa7LiRKeqdoG1M69NThSk3t1H7O7ZtzfF5hetOaFYVAKJEKSmlBt2W9uy+hVGnsFTR0ZUY0GslCMfBHpRGo0+npXlrFXnWsWAcG7rOm2v4Wc+avTfo4uNxc1N+jRpW+5zPGVQXMQmHpOoWE2MPKo7XqT4K3swyXnc7OHjUcz2eAprHNvV1MVkbu5E6d1Zgan/p6m5qTbaT2lHtRXlRptlAslWgAAJAASAAIYQBK1isNCrB06kVKMlZphVxmk/R5F+1ha7g+EKi249FJNSXfcxthjw57cNSzjdPaDxmGvKvh24qy9ZCSqR4JXvZrwML4uWNy483B1rWbTPRopnO8e2t9OxGN8kt4REb7MyGCtbbyvwLcraMeusr21wWSRbaZn0IxCIVILJUcxKJYGt2qmIg6GNvdVNhRhbOmnnG7433m0455Pq9bHw8/ode8s6FRyW01Z53X7SyZj9XlzuJmJSmEKHvIUlutU8F67F0ovdGW3LpD2vmku8tjrzXiG/C4+fNWPu9XSzueg+hc5rdo+6VVLdlLoyl4VtG4ea16OxJxeaTt3cPL5HnzHLMw+dyY/07zXwqw1Jykkt7aSz5uyCkVmZ1D2PRuEVGlTor4IqPelm/G56VY1EQ+kx0ilYrHhmkrgAAAABIAAAAkCEMABIQoq1Ywi5SaUYptt5JJb2wTOnjuuesssdU2Y3VCDexH8zWXrJL5LgmeflyzeenZ4HGcVOWeWvwx/loaNBzdl3vkZxG3JWkzLNjBU92b52zL6011FESnew2iZ2hEIVRZKYVphO261Y0c69eMXG8d8v3eP2L0rzW06OFx/qZIh6PpHR8a9J05Lp2Nbjun0e7Ly7SeF9XUkmrNt35bSya6vecWWurbeRxuPltzerXveZuBQ831Kyq7/0dYG0aldrfanHuzk/kdPDV72er7Ox9LX+ztorI6npreIoqcXCSyasB5VrFgnSnZ8Hst9nwv/fM4s1dTt5fH49as2GpOjNvEqTatTSm0nfN+6vr3DDTdts+Dw7yc3p1ekQR2vYVAAASAAAAAAABIBAQAGEPM/SLrE6kng6L9iD/AErXxTXwdFx7ehx8Rk37kfd5PH8Tv+lX7/8ATjqND4pbuHG5hEPOrXzLJfJbuwstvxBTpSm7Ri21y3Jc2+BHVGpnsprSpwynU9p7lFXt2yk2kuiuwnk6SOFt6CukoELlGDbshtL07U7RfqaO3Je1Ut3RW5HZhpyxufL3OEw/p03PeXRNGzqcTr3ov9bFe95TW7xMc1N1c/FYufHMOFkcbwVWHpOclFb3ZIjW+hyzM6h7FofAqjRhSXwrPq82ejSvLWIfRYsf6dIr6M8s0Q0BotYtXvxSvGahLddq6dtxS9OZS9IvGpXtXdC/hKWxtKUm7yklZdiS5L6ilIpGoKY60jVYbcuuAAkAAAIAkAAAAAkAAaTW7Sjw2FlODtOVoQfJy+LuM8tuWu3NxGT9PHMvKIYCS9p+La38XnvdziiHh8mpVfh1vlPqorafbyXmDkmZV0XTlPZo05VZfl999l4wyXeyYrvtDenCzaekflv8FqpjsRlUiqFPgpWus+FGGV+rNq4Znu7cfB/3SzNJejDDOi5OdWpWh7SnKVl7OeyoLJLoa/pV1p1RhpFeXTkMVQ2XZrdlu39vhY47RqdPCzY+S81W4p33EMnVan6DdWe1NezGzl9ImuGnNO5d/BcPNrc89oelRjY7XsJYGJpLBqtSlTfFZdj4MiY3A8jxWDlGpKns5p3tyzz87nBaurTDwc2Ka5Zq6PUXRG1V9dJZU/8AFwX1NcFN25nRwOGefnnw9ESOt6wAAASBASAACAAAAAAAAgJSEASBDTay6C/GU1FTUZK9m1tLPmil6RaNSpekXry2c3hvR3P9bjMuVOnbzm38jKMEeZc9eExw3GE1EwUM5wlWf9bNyX8nu+RpGKseG9cdK9odBhsLTpR2aVOMFyjFRXgkXiNdl10kGB5nrno71Nd8IzvKPLPeuy31OTPXU7ebx+PtaGFoXQ8q1VQg1J5O6d1Fc5MzpTmno5MOCclvk9Q0fgo0KapwWS3vi3xb7TurEVjUPbrWKxqGSSsAAOY0/qisTWVanV9XL4vZvnzVmrMxyYYvO3Pm4euWdy3eh9Gxw1KNKLva7cnvlJ72zStYrGoa48cUrywzCy4ACQAAAAAAAAAAgCQAACAAACQgAAAAADC0poqjiobFaG0lmmm00+xorasWjUq2rFo1KdF6Ko4WGxRhsp5ttttvtbFaxXpCKY60jVYZhZcAAAAAAEgAAAAAAAAAAAgCQDAgAAAXAASEABAAABgQBIAAAAASBAAJAAAAAAAAABAAIAkAwAEASAAlAf/Z)) å°†éœ€è¦åœ¨æ‰€æœ‰å…¶ä»–ç –å—ä¸­å¯»æ‰¾å®ƒï¼Œè¿™ä¼šä½¿è¿™é¡¹ä»»åŠ¡å˜å¾—æå…¶å›°éš¾å’Œè€—æ—¶ã€‚

è¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬å¸Œæœ›ä»¥æˆ‘ä»¬çš„å°ä¹é«˜å¸å›½ç»“æŸçš„æƒ…å†µã€‚æˆ‘ä»¬ä¹Ÿä¸å¸Œæœ›å®ƒä¸ Vue Storefront ä¸€èµ·ä½¿ç”¨ï¼Œå› ä¸ºå®ƒæ„å‘³ç€æ˜“äºæ‰©å±•ï¼Œå› æ­¤æ‚¨å¯ä»¥å°†ç»¿è‰²ç –å—ï¼ˆæˆ–å½“å‰ç”¨æˆ·è´­ç‰©è½¦åŠŸèƒ½/cms æä¾›å•†/cms å†…å®¹æä¾›å•†ï¼‰æ›¿æ¢ä¸ºé»‘è‰²ç –å—ï¼ˆå…·æœ‰å¤šä¸ªè´­ç‰©è½¦çš„ä¸åŒè´­ç‰©è½¦åŠŸèƒ½ï¼ŒWordPress ä»£æ›¿ï¼‰ Prismic çš„å†…å®¹ç­‰ï¼‰ï¼Œè€Œæ— éœ€åœ¨æ‰€æœ‰ç§¯æœ¨ä¸­å¯»æ‰¾æ¯ä¸€ä¸ªç§¯æœ¨ï¼Œä¹Ÿä¸å¿…æ‹…å¿ƒæ‚¨ä¼šé”™è¿‡å…¶ä¸­çš„ä¸€äº›ï¼Œå¦åˆ™æ¬§ç›Ÿå°†æ²¡æ”¶æ‚¨æ‹¥æœ‰çš„æ‰€æœ‰ç§¯æœ¨ï¼æˆ‘ä»¬è¿˜å¸Œæœ›æ›´å®¹æ˜“æ‰¾åˆ°æˆ‘ä»¬ç°åœ¨æƒ³è¦å®Œæˆè¿™æ£µè¯¥æ­»çš„æ£•æ¦ˆæ ‘çš„æ­£ç¡®ç –å—ï¼

é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è®©è¿™ç§å¯æ€•çš„æƒ…å†µå˜å¾—æ›´å¥½å‘¢ï¼Ÿ

ä»‹ç»......ï¼ˆé¼“å£°åœ¨èƒŒæ™¯ä¸­å †ç§¯ï¼‰***æŒ‰é¢œè‰²åˆ†ç»„çš„ç –å—\***ï¼ï¼ˆåœ¨åå°å“‡ï¼‰

![ä¹é«˜2](https://docs.vuestorefront.io/v1/assets/img/organized_lego_bricks.3b6473e7.jpeg)

å½“æˆ‘ä»¬å°†ç§¯æœ¨æŒ‰é¢œè‰²åˆ†ç»„ï¼ˆå¹¶åœ¨å•ç‹¬çš„æ¡† - æ¨¡å—ä¸­ï¼‰æ—¶ï¼Œæ›´å®¹æ˜“æ‰¾åˆ°æ£•æ¦ˆæ ‘æ‰€éœ€çš„ç»¿è‰²ç§¯æœ¨ï¼Œå› ä¸ºæˆ‘ä»¬åªéœ€è¦æœç´¢æ‰€æœ‰ç§¯æœ¨çš„ä¸€å°éƒ¨åˆ†ã€‚æ­¤å¤–ï¼Œå½“æˆ‘ä»¬æƒ³ç”¨é»‘è‰²ç –å—æ›¿æ¢ç»¿è‰²ç –å—æ—¶ï¼Œä¸æ˜¯ä¸€ä¸€å¯»æ‰¾æ‰€æœ‰ç»¿è‰²ä»£è¡¨ï¼Œè€Œæ˜¯å°†å®ƒä»¬çš„ç›’å­æ›¿æ¢ä¸ºè£…æœ‰é»‘è‰²ç –å—çš„ç›’å­ã€‚æˆ‘ä»¬ä¹Ÿä¸å¿…æ‹…å¿ƒæ˜¯å¦æœ‰é—æ¼ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“æ‰€æœ‰çš„ç»¿ç –éƒ½åœ¨ç›’å­é‡Œã€‚

è¿™å°±æ˜¯æˆ‘ä»¬åœ¨ Vue Storefront ä¸­å¯»æ‰¾çš„æ¨¡å—åŒ–å’Œå¯æ‰©å±•æ€§ä»¥åŠæˆ‘ä»¬ç›®å‰æ­£åœ¨å°†å…¶é‡å†™çš„æ¶æ„ã€‚

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#what-is-the-purpose-of-vs-modules)VS æ¨¡å—çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ

åœ¨[è¿™ä¸ªè®¨è®ºä¸­](https://github.com/vuestorefront/vue-storefront/issues/1213)å¾ˆå¥½åœ°æè¿°äº†ç›®çš„[ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/issues/1213). å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š

- **æ›´å¥½çš„å¯æ‰©å±•æ€§**ï¼šæˆ‘ä»¬å¯ä»¥æ‰©å±•æ¯ä¸ªæ¨¡å—æˆ–ç”¨æ–°çš„æ¨¡å—å®Œå…¨æ›¿æ¢å®ƒã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›å°† Cart æ¨¡å—æ›¿æ¢ä¸ºå…è®¸æ‹¥æœ‰å¤šä¸ªè´­ç‰©è½¦çš„æ¨¡å—ã€‚ä½¿ç”¨æ¨¡å—æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ç¦»å½“å‰çš„ Cart æ¨¡å—å¹¶å°†å…¶æ›¿æ¢ä¸ºæ–°çš„æ¨¡å—ã€‚å¦ä¸€ä¸ªä¾‹å­å¯ä»¥æ˜¯ä¸ºä¸åŒçš„å†…å®¹ CMSes é›†æˆç­‰ä½¿ç”¨ä¸åŒçš„æ¨¡å—ã€‚
- **æ›´å¥½çš„å¼€å‘äººå‘˜ä½“éªŒ**ï¼šé™¤äº†æ¨¡å—ï¼Œæˆ‘ä»¬è¿˜å¼•å…¥äº†è®¸å¤šåŠŸèƒ½ï¼Œä¸“æ³¨äºä¸ºå¼€å‘äººå‘˜æä¾›æ›´å¥½ã€æ›´è½»æ¾çš„ä½“éªŒï¼Œè®©ä»–ä»¬ä»¥æ›´å¯é¢„æµ‹çš„æ–¹å¼ç»§ç»­å‰è¿›ã€‚æˆ‘ä»¬æ”¹å˜äº†æ‚¨ä½¿ç”¨åŠŸèƒ½ã€æ·»åŠ å•å…ƒæµ‹è¯•ã€TypeScript æ¥å£ç­‰ç»„åˆç»„ä»¶çš„æ–¹å¼ã€‚
- **æ›´å¥½çš„å¯å‡çº§æ€§**ï¼šæ¯ä¸ªæ¨¡å—éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„ NPM åŒ…ï¼Œå› æ­¤å¯ä»¥ç‹¬ç«‹å‡çº§ï¼Œå¹¶ä¸”ç”±äºå®ƒå°è£…äº†æ‰€æœ‰é€»è¾‘ï¼Œå› æ­¤åœ¨åˆ†ç¦»ã€ä¿®æ”¹æˆ–æ›¿æ¢æ—¶ä¸åº”è¯¥ç ´ååº”ç”¨ç¨‹åºçš„ä»»ä½•å…¶ä»–éƒ¨åˆ†ã€‚

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#module-config-and-capabilities)æ¨¡å—é…ç½®å’ŒåŠŸèƒ½

Module config æ˜¯å®ä¾‹åŒ– VS æ¨¡å—æ‰€éœ€çš„å¯¹è±¡ã€‚æ‚¨æä¾›çš„é…ç½®å¯¹è±¡ç¨åç”¨äºæ‰©å±•å’ŒæŒ‚é’©åˆ°åº”ç”¨ç¨‹åºçš„ä¸åŒéƒ¨åˆ†ï¼ˆä¾‹å¦‚è·¯ç”±å™¨ã€Vuex ç­‰ï¼‰ã€‚è¯·å°†æ­¤å¯¹è±¡ç”¨ä½œè´Ÿè´£æ‰©å±• Vue Storefront çš„å”¯ä¸€éƒ¨åˆ†ã€‚å¦åˆ™å®ƒå¯èƒ½ä¼šåœ¨ä¸€äº›ç ´åæ€§çš„æ ¸å¿ƒæ›´æ–°ååœæ­¢å·¥ä½œã€‚

åº”å°†å…·æœ‰æä¾›çš„é…ç½®çš„ Vue Storefront æ¨¡å—å¯¹è±¡å¯¼å‡ºåˆ°`index.ts`å…¥å£ç‚¹ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œå®ƒåº”è¯¥æ˜¯ä¸€ä¸ªä¸æ¨¡å—é”®åç§°ç›¸åŒçš„*å¯¼å‡º*ã€‚

Vue Storefront Module çš„ç­¾åå¦‚ä¸‹æ‰€ç¤ºï¼š

```js
interface VueStorefrontModuleConfig {
  key: string;
  store?: {
    modules?: { key: string, module: Module<any, any> }[],
    plugin?: Function,
  };
  router?: {
    routes?: RouteConfig[],
    beforeEach?: NavigationGuard,
    afterEach?: NavigationGuard,
  };
  beforeRegistration?: (VSF) => void;
  afterRegistration?: (VSF) => void;
}
```

[åœ¨è¿™é‡Œ](https://github.com/vuestorefront/vue-storefront/blob/develop/core/modules/index.ts)æŸ¥çœ‹ä»£ç [ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/develop/core/modules/index.ts)

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#key-required)`key` ï¼ˆå¿…éœ€çš„ï¼‰

é”®æ˜¯æ¨¡å—çš„ IDã€‚å®ƒç”¨äºæ ‡è¯†æ‚¨çš„æ¨¡å—å¹¶åœ¨è¯¥æ¨¡å—å…³è”çš„æ‰€æœ‰åŸºäºå¯†é’¥çš„æ‰©å±•ä¸­è®¾ç½®å¯†é’¥ï¼ˆä¾‹å¦‚ï¼Œåˆ›å»ºå‘½åç©ºé—´å­˜å‚¨ï¼‰ã€‚è¿™ä¸ªé”®åº”è¯¥æ˜¯å”¯ä¸€çš„ã€‚

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#store)`store`

Vuex çš„å…¥å£ç‚¹ã€‚

- `modules` - åœ¨ç»™å®šé”®ä¸‹æ³¨å†Œçš„ Vuex æ¨¡å—æ•°ç»„
- `plugin` - ä½ å¯ä»¥åœ¨è¿™é‡Œæä¾›ä½ è‡ªå·±çš„ Vuex æ’ä»¶

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#router)`router`

vue-router çš„å…¥å£ç‚¹ã€‚æ‚¨å¯ä»¥æä¾›é¢å¤–çš„è·¯çº¿å’Œ[å¯¼èˆªå®ˆå« ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://router.vuejs.org/guide/advanced/navigation-guards.html)è¿™é‡Œã€‚

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#beforeregistration)`beforeRegistration`

åœ¨æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯æ³¨å†Œæ¨¡å—ä¹‹å‰å°†è°ƒç”¨çš„å‡½æ•°ã€‚æ‚¨å¯ä»¥åœ¨æ­¤å¤„è®¿é—® VSF å¯¹è±¡ã€‚

è¯¥`VSF`å¯¹è±¡æ˜¯æ‚¨çš„ Vue Storefront å•†åº—çš„ä¸€ä¸ªå®ä¾‹ã€‚å®ƒåŒ…å«ä»¥ä¸‹å±æ€§

```js
    Vue?: VueConstructor,
    config?: Object,
    store?: Store<RootState>,
    isServer?: boolean
```

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#afterregistration)`afterRegistration`

åœ¨æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯æ³¨å†Œæ¨¡å—åå°†è°ƒç”¨çš„å‡½æ•°ã€‚æ‚¨å¯ä»¥åœ¨æ­¤å¤„è®¿é—® VSF å¯¹è±¡ã€‚

è¯¥`VSF`å¯¹è±¡æ˜¯æ‚¨çš„ Vue Storefront å•†åº—çš„ä¸€ä¸ªå®ä¾‹ã€‚å®ƒåŒ…å«ä»¥ä¸‹å±æ€§

```js
    Vue?: VueConstructor,
    config?: Object,
    store?: Store<RootState>,
    isServer?: boolean
```

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#module-file-structure)æ¨¡å—æ–‡ä»¶ç»“æ„

æ‚¨å¯ä»¥åœ¨ä¸‹é¢çœ‹åˆ° VS æ¨¡å—çš„æ¨èæ–‡ä»¶ç»“æ„ã€‚æ‰€æœ‰çš„æ ¸å¿ƒéƒ½æ˜¯ä»¥è¿™ç§æ–¹å¼ç»„ç»‡çš„ã€‚å°è¯•åœ¨æ‚¨åˆ›å»ºçš„æ–‡ä»¶ä¸­ä½¿ç”¨ç±»ä¼¼çš„æ–‡ä»¶ç»“æ„ã€‚å¦‚æœæ‰€æœ‰æ¨¡å—éƒ½ä½¿ç”¨ç±»ä¼¼çš„æ¶æ„æ¥å®ç°ï¼Œé‚£ä¹ˆç»´æŠ¤å’Œç†è§£å®ƒä»¬ä¼šå®¹æ˜“å¾—å¤šã€‚è¯·é¿å…å¯¹è®¾è®¡è¿›è¡Œä¸å¿…è¦çš„æ›´æ”¹ï¼Œé™¤éå¦æœ‰è¦æ±‚ã€‚

å¹¶éæ‰€æœ‰è¿™äº›æ–‡ä»¶å¤¹å’Œæ–‡ä»¶éƒ½åº”è¯¥å­˜åœ¨äºæ¯ä¸ªæ¨¡å—ä¸­ã€‚å”¯ä¸€çš„å¼ºåˆ¶æ€§æ–‡ä»¶æ˜¯`index.ts`å“ªä¸ªæ˜¯å…¥å£ç‚¹ã€‚å…¶ä½™çš„å–å†³äºæ‚¨çš„éœ€æ±‚å’Œæ¨¡å—åŠŸèƒ½ã€‚

ä½ å¯ä»¥çœ‹çœ‹[æ¨¡å—æ¨¡æ¿ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/tree/master/core/modules/module-template)å¸¦æœ‰é…ç½®ä¸­åˆ—å‡ºçš„æ‰€æœ‰åŠŸèƒ½çš„ç¤ºä¾‹å®ç°ã€‚

- `components`- ä¸æ­¤æ¨¡å—ç›¸å…³çš„ç»„ä»¶é€»è¾‘ï¼ˆä¾‹å¦‚ Cart æ¨¡å—çš„ Microcartï¼‰ã€‚é€šå¸¸å®ƒåŒ…å«`.ts`æ–‡ä»¶ï¼Œä½†`.vue`å¦‚æœç»„ä»¶éœ€è¦å¼€ç®±å³ç”¨ï¼Œæ‚¨ä¹Ÿå¯ä»¥åˆ›å»ºæ–‡ä»¶å¹¶æä¾›ä¸€äº›åŸºçº¿æ ‡è®°ã€‚

- `pages`- å¦‚æœæ‚¨æƒ³æä¾›æ¨¡å—çš„å®Œæ•´é¡µé¢ï¼Œè¯·å°†å®ƒä»¬æ”¾åœ¨è¿™é‡Œã€‚ä¸ºè¿™äº›é¡µé¢æ‰©å±•è·¯ç”±å™¨é…ç½®ä¹Ÿæ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯

- ```
  store
  ```

  \- ä¸æ­¤æ¨¡å—å…³è”çš„ Vuex æ¨¡å—ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œæ”¾ç½® Vuex æ¨¡å—æ‰©å±•

  - `index.ts`- Vuex æ¨¡å—çš„å…¥å£ç‚¹å’Œä¸»è¦å‡ºå£ã€‚å¦‚æœé€»è¾‘å¤ªå¤æ‚è€Œæ— æ³•å°†å…¶ä¿å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œåˆ™å¯ä»¥å°†æ“ä½œ/getter/mutations æ‹†åˆ†ä¸ºä¸åŒçš„æ–‡ä»¶ã€‚åº”è¯¥åœ¨`store`é…ç½®å±æ€§ä¸­ä½¿ç”¨ã€‚
  - `mutation-types.ts` - ç”±å˜é‡è¡¨ç¤ºçš„å˜å¼‚å­—ç¬¦ä¸²ä»£æ›¿æ™®é€šå­—ç¬¦ä¸²ä½¿ç”¨
  - `plugins.ts`- æ”¾ç½® vuex æ’ä»¶çš„å¥½åœ°æ–¹ã€‚åº”è¯¥åœ¨`store.plugins`é…ç½®å¯¹è±¡ä¸­ä½¿ç”¨

- `types` - ä¸æ¨¡å—å…³è”çš„ TypeScript ç±»å‹

- `test`- åŒ…å«æ¯ä¸ªæ–°æ¨¡å—æˆ–é‡å†™æ¨¡å—*æ‰€éœ€çš„*å•å…ƒæµ‹è¯•çš„æ–‡ä»¶å¤¹ã€‚

- ```
  hooks
  ```

   \- åœ¨æ¨¡å—æ³¨å†Œä¹‹å‰å’Œä¹‹åè°ƒç”¨çš„ä¹‹å‰/ä¹‹åçš„é’©å­ã€‚

  - `beforeRegistration.ts`- åº”è¯¥åœ¨`beforeRegistration`é…ç½®å±æ€§ä¸­ä½¿ç”¨ã€‚
  - `afterRegistration.ts`- åº”è¯¥åœ¨`afterRegistration`é…ç½®å±æ€§ä¸­ä½¿ç”¨ã€‚

- ```
  router
  ```

   \- ä¸æ­¤æ¨¡å—ç›¸å…³çš„è·¯çº¿å’Œå¯¼èˆªå®ˆå«

  - `routes.ts`- å°†æ·»åŠ åˆ°å½“å‰è·¯ç”±å™¨é…ç½®çš„è·¯ç”±å¯¹è±¡æ•°ç»„ã€‚åº”è¯¥åœ¨`router.routes`é…ç½®å±æ€§ä¸­ä½¿ç”¨ã€‚
  - `beforeEach.ts`- beforeEach å¯¼èˆªå®ˆå«ã€‚åº”è¯¥åœ¨`router.beforeEach`é…ç½®å±æ€§ä¸­ä½¿ç”¨ã€‚
  - `afterEach.ts`- afterEach å¯¼èˆªå®ˆå«ã€‚åº”è¯¥åœ¨`router.afterEach`é…ç½®å±æ€§ä¸­ä½¿ç”¨ã€‚

- `queries` - GraphQL æŸ¥è¯¢

- `helpers` - æ—¨åœ¨æ”¯æŒæ¨¡å—è¡Œä¸ºçš„æ‰€æœ‰å…¶ä»–å†…å®¹

- `index.js`- æ¨¡å—çš„å…¥å£ç‚¹ã€‚åº”è¯¥å¯¼å‡º VueStorefrontModuleã€‚å®ƒä¹Ÿæ˜¯å®ä¾‹åŒ–ç¼“å­˜å­˜å‚¨çš„å¥½åœ°æ–¹ã€‚

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#module-registration)æ¨¡å—æ³¨å†Œ

åŒ…æ‹¬æ ¸å¿ƒæ¨¡å—åœ¨å†…çš„æ‰€æœ‰æ¨¡å—éƒ½åœ¨`src/modules/index.ts`æ–‡ä»¶ä¸­æ³¨å†Œã€‚ç”±äºè¿™ç§æ–¹æ³•ï¼Œæ‚¨å¯ä»¥åœ¨æ³¨å†Œä¹‹å‰è½»æ¾ä¿®æ”¹ä»»ä½•æ ¸å¿ƒæ¨¡å—å¯¹è±¡ï¼ˆ[åœ¨æ­¤å¤„](https://docs.vuestorefront.io/v1/guide/archives/modules.html#extending-and-overriding-vue-storefront-modules)é˜…è¯»æ›´å¤šå†…å®¹ï¼‰ã€‚

æ‰€æœ‰ VS æ¨¡å—`registerModules`éƒ½å°†åœ¨å•†åº—åˆå§‹åŒ–æœŸé—´æ³¨å†Œã€‚

------

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#general-rules-and-good-practices)ä¸€èˆ¬è§„åˆ™å’Œè‰¯å¥½åšæ³•

é¦–å…ˆï¼Œçœ‹çœ‹æ¨¡å—æ¨¡æ¿ã€‚å®ƒåŒ…å«å¾ˆå¥½çš„ä¾‹å­ã€è‰¯å¥½çš„å®è·µå’Œå¯¹å¯ä»¥æ”¾åœ¨æ¨¡å—ä¸­çš„æ‰€æœ‰å†…å®¹çš„è§£é‡Šã€‚

1. **æœ€é‡è¦çš„è§„åˆ™**å°è¯•éš”ç¦»æ¨¡å—æ­£å¸¸å·¥ä½œæ‰€éœ€çš„æ‰€æœ‰é€»è¾‘ï¼Œå¹¶å°†å®ƒä»¬æ”¾å…¥æ¨¡å—ä¸­ã€‚æ‚¨å¯ä»¥ä»åº”ç”¨ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†å¯¼å…¥å®ƒï¼Œä½†é€»è¾‘æœ¬èº«åº”è¯¥å­˜åœ¨äºæ¨¡å—ä¸­
2. **å°½é‡ä¸è¦ä¾èµ–ä»»ä½•å…¶ä»–æ¨¡å—ã€‚å°†æ‰€æœ‰å†…å®¹å°è£…èµ·æ¥ï¼Œåªä¾èµ–æ ¸å¿ƒåŠ©æ‰‹å’Œåº“**ã€‚ä»…å½“è¿™æ˜¯å®ç°åŠŸèƒ½å’Œ`rootStore`ä¸ºæ­¤ç›®çš„å¯¼å…¥çš„å”¯ä¸€æ–¹æ³•æ—¶æ‰ä½¿ç”¨å…¶ä»–å•†åº—ã€‚æ¨¡å—åº”è¯¥ç‹¬ç«‹å·¥ä½œå¹¶ä¸”åªä¾èµ–äºå®ƒä»¬è‡ªå·±ã€‚å°è¯•å°†æ¯ä¸ªæ¨¡å—è§†ä¸ºç‹¬ç«‹çš„ npm åŒ…ã€‚
3. å°†æ‰€æœ‰å¯é‡ç”¨åŠŸèƒ½ä½œä¸º Vuex æ“ä½œï¼ˆä¾‹å¦‚`addToCart(product)`ï¼Œ`subscribeNewsletter()`ç­‰ï¼‰æ”¾ç½®ï¼Œè€Œä¸æ˜¯å°†å®ƒä»¬æ”¾ç½®åœ¨ç»„ä»¶ä¸­ã€‚å°è¯•ä½¿ç”¨ getter æ¥ä¿®æ”¹æˆ–è¿‡æ»¤çŠ¶æ€ä¸­çš„å€¼ã€‚æˆ‘ä»¬æ­£åœ¨å°è¯•å°†å¤§éƒ¨åˆ†é€»è¾‘æ”¾åœ¨ Vuex å•†åº—ä¸­ï¼Œä»¥ä¾¿æ›´è½»æ¾åœ°è¿›è¡Œæ ¸å¿ƒæ›´æ–°ã€‚è¿™æ˜¯è¿™ç§å¤–åŒ–çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚

```js
export const Microcart = {
  name: 'Microcart',
  computed: {
    productsInCart(): Product[] {
      return this.$store.state.cart.cartItems;
    },
    appliedCoupon(): AppliedCoupon | false {
      return this.$store.getters['cart/coupon'];
    },
    totals(): CartTotalSegments {
      return this.$store.getters['cart/totals'];
    },
    isMicrocartOpen(): boolean {
      return this.$store.state.ui.microcart;
    },
  },
  methods: {
    applyCoupon(code: String): Promise<boolean> {
      return this.$store.dispatch('cart/applyCoupon', code);
    },
    removeCoupon(): Promise<boolean> {
      return this.$store.dispatch('cart/removeCoupon');
    },
    toggleMicrocart(): void {
      this.$store.dispatch('ui/toggleMicrocart');
    },
  },
};
```

1. å¦‚æœæ‚¨æƒ³é€šçŸ¥æ ¸å¿ƒç»„ä»¶æ–¹æ³•çš„æˆåŠŸ/å¤±è´¥ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å›è°ƒæˆ–ä½œç”¨åŸŸäº‹ä»¶ã€‚å¦‚æœæ‚¨è®¤ä¸ºå¯ä»¥ä»æ¨¡æ¿è°ƒç”¨è¯¥å‡½æ•°å¹¶ä¸”æ‚¨éœ€è¦è§£æçš„å€¼ï¼Œè¯·çœç•¥ Promisesã€‚è¿™æ˜¯æ‚¨å¯ä»¥åœ¨ on`template`æˆ–`script`section ä¸­è°ƒç”¨çš„æ–¹æ³•çš„ä¸€ä¸ªå¾ˆå¥½çš„ç¤ºä¾‹ï¼š

```js
addToCart(product, success, failure) {
  this.$store.dispatch('cart/addToCart').then(res =>
    success(res)
  ).catch(err =>
    failure(err)
  )
}
```

å°è¯•æ ¹æ®ç”¨ä¾‹é€‰æ‹©ä¸€ç§æ–¹æ³•ã€‚[è¿™ä¸ª ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/develop/core/modules/mailchimp/components/Subscribe.ts#L28)æ˜¯ä½¿ç”¨å›è°ƒçš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚

1. åˆ›å»ºå¯ä»¥ä½¿ç”¨ä¸åŒå‚æ•°è½»æ¾è°ƒç”¨çš„çº¯å‡½æ•°ã€‚`data`ä»…åœ¨éœ€è¦æ—¶æ‰ä¾èµ–å±æ€§è€Œä¸æ˜¯å‚æ•°ï¼ˆä¾‹å¦‚ï¼Œå®ƒä»¬åœ¨[æ­¤å¤„](https://github.com/vuestorefront/vue-storefront/blob/develop/core/modules/mailchimp/components/Subscribe.ts#L28)éªŒè¯[ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/develop/core/modules/mailchimp/components/Subscribe.ts#L28))
2. å»ºç«‹æ–‡ä»¶åƒå¦‚ä¸‹å‡ºå£ç»„ä»¶ï¼š[æ–‡ä»¶ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/develop/core/modules/mailchimp/components/Subscribe.ts)
3. å¦‚æœæ‚¨çš„æ¨¡å—æ ¸å¿ƒåŠŸèƒ½æ˜¯ä¸å¤–éƒ¨æœåŠ¡çš„é›†æˆï¼Œæœ€å¥½å°†å…¶å‘½åä¸ºä¸æ­¤æœåŠ¡ç›¸åŒçš„åç§°ï¼ˆä¾‹å¦‚`mailchimp`ï¼‰
4. ä½¿ç”¨å‘½åå¯¼å‡ºå’Œç±»å‹æ£€æŸ¥ã€‚

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#adding-new-features-as-vs-modules)æ·»åŠ æ–°åŠŸèƒ½ä½œä¸º VS æ¨¡å—

- å¦‚æœæ‚¨æƒ³åˆ›å»ºä¸€ä¸ªæ–°æ¨¡å—ï¼Œè¯·å¤åˆ¶å†…å®¹`src/module-template`å¹¶ä½¿ç”¨æ‚¨éœ€è¦çš„éƒ¨åˆ†ã€‚
- å¦‚æœæ‚¨æ­£åœ¨åˆ›å»ºä¸€é¡¹æ–°åŠŸèƒ½ï¼Œè¯·æ³¨æ„å®ƒä¸ä»…ä»…æ˜¯æ‰©å±•ç°æœ‰åŠŸèƒ½ã€‚å¦‚æœæ‚¨ç¡®å®šè¦æä¾›çš„åŠŸèƒ½æ˜¯å…¨æ–°çš„ï¼Œåˆ™åº”å°†å…¶ä½œä¸ºæ–°çš„ VS æ¨¡å—å¼•å…¥ã€‚
- æä¾›åº”ä»£è¡¨åŠŸèƒ½æˆ–ç¬¬ 3 æ–¹ç³»ç»Ÿåç§°çš„å”¯ä¸€é”®ï¼ˆå¦‚æœæ¨¡å—æ˜¯é›†æˆï¼‰
- å¦‚æœæ‚¨çš„æ¨¡å—æœªå£°ç§°ç›´æ¥æ‰©å±•å®ƒï¼Œè¯·å°½é‡ä¸è¦ä¾èµ–æ¥è‡ªå…¶ä»–æ¨¡å—çš„æ•°æ®å’Œé€»è¾‘ã€‚è¿™æ ·åšï¼Œå³ä½¿åœ¨å¤§é‡ VS æ ¸å¿ƒæ›´æ–°ä¹‹åï¼Œå®ƒä¹Ÿå¯ä»¥ä¿è¯ç»§ç»­å·¥ä½œå¹¶ä¸”æ›´å®¹æ˜“é‡ç”¨ã€‚

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#extending-and-overriding-vue-storefront-modules)æ‰©å±•å’Œè¦†ç›– Vue Storefront æ¨¡å—

å¯ä»¥æ‰©å±•ï¼Œå¹¶ä¸”é€šè¿‡æä¾›ä¸€ä¸ªä¿®æ”¹çš„ä»»ä½•ç™»è®°å‰çš„Vueåº—é¢æ¨¡å—çš„æ‰€æœ‰éƒ¨åˆ†`VueStorefrontModuleConfig`çš„å¯¹è±¡**ä½¿ç”¨ç›¸åŒçš„å¯†é’¥**å¯¹`extendModule()`çš„åŠŸèƒ½ã€‚è¿™ä¸ªé…ç½®ä¼šå’ŒåŒä¸€ä¸ªkeyçš„æ¨¡å—æ·±åº¦åˆå¹¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š

- æ‰€æœ‰å…·æœ‰ç›¸åŒé”®çš„ Vuex å­˜å‚¨å°†è¢«åˆå¹¶ï¼ˆå†²çªçš„åŠ¨ä½œ/çªå˜å°†è¢«è¦†ç›–ï¼Œå…¶ä»–çš„å°†è¢«æ·»åŠ ï¼‰
- å¦‚æœæä¾›å‰/åé’©å­ï¼Œå­˜å‚¨æ’ä»¶æˆ–è·¯ç”±å™¨å¯¹è±¡å±æ€§ç­‰å¶å­å°†è¢«æ–°çš„è¦†ç›–ã€‚

è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æƒ³`cart`é€šè¿‡è¦†ç›–å®ƒçš„`beforeRegistration`é’©å­å’Œ`load`Vuex åŠ¨ä½œæ¥æ‰©å±•æ¨¡å—ã€‚

1. é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡ä¸€ä¸ª`VueStorefrontModuleConfig`æˆ‘ä»¬å°†ç”¨æ¥æ‰©å±•`cart`æ¨¡å—çš„ã€‚å®ƒå¿…é¡»ä¸`key`æˆ‘ä»¬è¦æ‰©å±•çš„æ¨¡å—å…·æœ‰ç›¸åŒçš„å€¼ã€‚
2. æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å°†æ­¤å¯¹è±¡ä¼ é€’ç»™`extendModule`å‡½æ•°
3. å°±è¿™æ ·ï¼ç°åœ¨ï¼Œå½“æ‚¨æ³¨å†Œ`cart`æ¨¡å—æ—¶ï¼Œå®ƒå°†ä½¿ç”¨æä¾›çš„é…ç½®è¿›è¡Œæ‰©å±•ã€‚

```js
import { Cart } from '@vue-storefront/core/modules/cart'

// 1. Preparation of new VSMConfig
const extendCartVuex = {
 actions: {
   load () {
     console.info('hey')
   }
 }
}

const extendCartAfterRegistration = function (VSF) {
   console.info('Hello, im extended now!')
 }

const cartExtend = {
 key: 'cart',
 afterRegistration: extendCartAfterRegistration,
 store: { modules: [{ key: 'cart', module: extendCartVuex }] },
}

// 2. After passing the object to extendModule function it will be merged with Cart module during registration
extendModule(cartExtend)

export const registerModules: VueStorefrontModule[] = [Cart]
```

å¦‚æœæ‚¨æƒ³å¯¹è‡ªå·±çš„ç‰¹å®šäºåº”ç”¨ç¨‹åºçš„ VS æ¨¡å—ï¼ˆä¸æ˜¯ npm åŒ…ï¼‰è¿›è¡Œå¤æ‚çš„æ›´æ”¹ï¼Œæœ€å¥½å°†æ­¤æ¨¡å—ä¿ç•™åœ¨`src/modules/{module-name}`. è¦ä½¿ç”¨å¦ä¸€ä¸ªæ¨¡å—æ‰©å±•æ¨¡å—ï¼Œåªéœ€å°†å…¶é…ç½®ä¼ é€’ç»™`extendModule`å‡½æ•°

```js
import { Cart } from '@vue-storefront/core/modules/cart'
import { ExtendCartModule } from 'extend-cart';


extendModule(ExtendCartModule.config)

export const registerModules: VueStorefrontModule[] = [Cart]
```

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#creating-third-party-modules)åˆ›å»ºç¬¬ä¸‰æ–¹æ¨¡å—

å¦‚æœæ‚¨æƒ³åˆ›å»ºç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œåªéœ€å°†`src/modules/module-template`åŸå§‹ä»£ç å¤åˆ¶åˆ°æ‚¨çš„ä»“åº“å³å¯ã€‚ä¸è¦ä½¿ç”¨ä»»ä½•è½¬è¯‘å’Œæ„å»ºå·¥å…·ï¼Œå› ä¸ºå®ƒä¼šé˜»æ­¢é€‚å½“çš„æ ‘æŠ–åŠ¨å’Œä¼˜åŒ–ã€‚æ„å»ºè¿‡ç¨‹ç”± Vue Storefront æ„å»ºå·¥å…·å¤„ç†ã€‚åŒ…åç§°éœ€è¦ä»¥`vsf-`å‰ç¼€å¼€å¤´æ‰èƒ½åŒ…å«åœ¨ Vue Storefront æ„å»ºè¿‡ç¨‹ä¸­ã€‚

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#contributions)è´¡çŒ®

è¯·å°†æ¯ä¸ªæ–°åŠŸèƒ½ä½œä¸ºç‹¬ç«‹çš„å°è£…æ¨¡å—ä»‹ç»ã€‚æˆ‘ä»¬è¿˜éœ€è¦æ‚¨çš„å¸®åŠ©ï¼Œå°† Vue Storefront é‡å†™ä¸ºæ¨¡å—åŒ–æ–¹æ³• -[åœ¨è¿™é‡Œ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/issues?q=is%3Aissue+is%3Aopen+label%3A"API+Module")æ‚¨å¯ä»¥[åœ¨æ­¤å¤„](https://github.com/vuestorefront/vue-storefront/blob/master/doc/api-modules/refactoring-to-modules.md)æ‰¾åˆ°ä¸æ­¤æ¶æ„æ›´æ”¹ç›¸å…³çš„ä»»åŠ¡[ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/master/doc/api-modules/refactoring-to-modules.md)æ˜¯å…³äºå¦‚ä½•åº”ç”¨è¿™äº›æ›´æ”¹çš„æ•™ç¨‹ã€‚

## [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#cart-module)è´­ç‰©è½¦æ¨¡å—

è¯¥æ¨¡å—åŒ…å«ä¸è´­ç‰©è½¦æ“ä½œç›¸å…³çš„æ‰€æœ‰é€»è¾‘ã€ç»„ä»¶å’Œå•†åº—ã€‚

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#components)æˆåˆ†

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#addtocart)æ·»åŠ åˆ°è´­ç‰©è½¦

æ­¤ç»„ä»¶ä»£è¡¨ä¸€ä¸ªæŒ‰é’®ï¼ŒæŒ‰ä¸‹è¯¥æŒ‰é’®å¯å°†äº§å“æ·»åŠ åˆ°è´­ç‰©è½¦ã€‚

**é“å…·**

- `product` - å°†æ·»åŠ åˆ°è´­ç‰©è½¦çš„äº§å“

**æ–¹æ³•**

- `addToCart(product)`- å°†ä¼ é€’çš„äº§å“æ·»åŠ åˆ°è´­ç‰©è½¦ã€‚é»˜è®¤æƒ…å†µä¸‹ä¸`product`propç›¸å…³

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#microcart)å¾®å‹è½¦

å¸¦æœ‰äº§å“åˆ—è¡¨å’Œä»·æ ¼æ‘˜è¦çš„ç”¨æˆ·è´­ç‰©è½¦ã€‚

**è®¡ç®—**

- `productsInCart` - å½“å‰åœ¨è´­ç‰©è½¦ä¸­çš„ä¸€ç³»åˆ—äº§å“
- `appliedCoupon`- è¿”å›å·²åº”ç”¨çš„è´­ç‰©è½¦ä¼˜æƒ åˆ¸æˆ–`false`å¦‚æœæœªåº”ç”¨ä¼˜æƒ åˆ¸
- `totals` - è´­ç‰©è½¦æ€»æ•°
- `isMicrocartOpen`-`true`å¦‚æœå¾®å‹è½¦æ‰“å¼€ï¼Œåˆ™è¿”å›

**æ–¹æ³•**

- `applyCoupon(code)` - åº”ç”¨è´­ç‰©è½¦ä¼˜æƒ åˆ¸
- `removeCoupon` - åˆ é™¤å½“å‰åº”ç”¨çš„è´­ç‰©è½¦ä¼˜æƒ åˆ¸
- `toggleMicrocart` - æ‰“å¼€/å…³é—­å¾®å‹è½¦

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#microcartbutton)å°è½¦æŒ‰é’®

è´Ÿè´£æ‰“å¼€/å…³é—­ Microcart çš„ç»„ä»¶

**è®¡ç®—**

- `quantity` - è´­ç‰©è½¦ä¸­çš„äº§å“æ•°é‡

**æ–¹æ³•**

- `toggleMicrocart` - æ‰“å¼€/å…³é—­å¾®å‹è½¦

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#product)äº§å“

ä»£è¡¨å¾®å‹è´­ç‰©è½¦ä¸­çš„äº§å“çš„ç»„ä»¶ã€‚å…è®¸ä¿®æ”¹å®ƒçš„æ•°é‡æˆ–ä»è´­ç‰©è½¦ä¸­åˆ é™¤ã€‚

**è®¡ç®—**

- `thumbnail` - è¿”å›äº§å“ç¼©ç•¥å›¾çš„ src

**æ–¹æ³•**

- `removeFromCart`-`product`ä»è´­ç‰©è½¦ä¸­åˆ é™¤å½“å‰äº§å“ï¼ˆæ•°æ®å±æ€§ï¼‰
- `updateQuantity`- æ›´æ–°å½“å‰äº§å“çš„è´­ç‰©è½¦æ•°é‡ï¼ˆæ•°æ®å±æ€§`product`ï¼‰

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#store-2)åº—é“º

Cart Store æ—¨åœ¨å¤„ç†ä¸è´­ç‰©è½¦ç›¸å…³çš„æ‰€æœ‰æ“ä½œã€‚

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#state)çŠ¶æ€

```js
  state: {
    itemsAfterPlatformTotals: {},
    platformTotals: null,
    platformTotalSegments: null,
    cartIsLoaded: false,
    cartServerToken: '', // server side ID to synchronize with Backend (for example Magento)
    shipping: [],
    payment: [],
    cartItemsHash: '',
    bypassCount: 0,
    cartItems: [] // TODO: check if it's properly namespaced
  },
```

è´­ç‰©è½¦çŠ¶æ€`localForage`åœ¨é¡µé¢åŠ è½½åè‡ªåŠ¨ä»é›†åˆä¸­åŠ è½½ï¼Œåªè¦`core/components/blocks/Microcart.vue`åŒ…å«ã€‚è´­ç‰©è½¦çŠ¶æ€é€šè¿‡è°ƒåº¦`cart/load`æ“ä½œåŠ è½½ï¼Œå¹¶[é€šè¿‡è´­ç‰©è½¦çŠ¶æ€çš„ä»»ä½•æ›´æ”¹è‡ªåŠ¨å­˜å‚¨ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/c43b2966a9ae10661e5a62b10445403ed9789b32/core/store/index.js#L118).

è´­ç‰©è½¦çŠ¶æ€æ•°æ®ï¼š

- `itemsAfterPlatformTotals`- åŠ©æ‰‹é›†åˆï¼Œå­—å…¸ï¼Œå…¶ä¸­é”®æ˜¯ Magento è´­ç‰©è½¦é¡¹ç›®`item_id`ï¼Œå­˜å‚¨æ¯ä¸ªé¡¹ç›®çš„æ€»è®¡ä¿¡æ¯ - ä» Magento æ¥æ”¶ï¼›`config.cart.synchronize_totals`å¯ç”¨æ—¶ä¼šè‡ªåŠ¨å¡«å……ï¼›
- `platformTotals`- ä¸ä¸Šè¿°é¡¹ç›®ç±»ä¼¼ï¼Œè¿™é‡Œæˆ‘ä»¬æœ‰æ¥è‡ª Magento çš„å½“å‰è´­ç‰©è½¦çš„å…¨éƒ¨æ€»æ•°ã€‚è¿™äº›é›†åˆç”±[`cart/syncTotals` ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/c43b2966a9ae10661e5a62b10445403ed9789b32/core/store/modules/cart/actions.js#L49)å’Œäº‹ä»¶å¤„ç†ç¨‹åº [`servercart-after-totals`ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/c43b2966a9ae10661e5a62b10445403ed9789b32/core/store/modules/cart/index.js#L30)
- `cartIsLoaded` (bool) - è°ƒåº¦åä¸ºçœŸ `cart/load`
- `shipping`- ï¼ˆå¯¹è±¡ï¼‰å½“å‰é€‰æ‹©çš„é€è´§æ–¹å¼ - ä»…åœ¨ä¸ä½¿ç”¨æ—¶`cart.synchronize_totals`ï¼ˆå¦‚æœæ˜¯è¿™æ ·ï¼Œé€è´§å’Œä»˜æ¬¾æ•°æ®æ¥è‡ª Magento2ï¼‰ï¼Œ
- `payment`- ï¼ˆå¯¹è±¡ï¼‰å½“å‰é€‰æ‹©çš„é€è´§æ–¹å¼ - ä»…åœ¨ä¸ä½¿ç”¨æ—¶`cart.synchronize_totals`ï¼ˆå¦‚æœæ˜¯è¿™æ ·ï¼Œé€è´§å’Œä»˜æ¬¾æ•°æ®æ¥è‡ª Magento2ï¼‰ï¼Œ
- `cartItems`- æ”¶é›†è´­ç‰©è½¦ç‰©å“ï¼›é¡¹ç›®æ ¼å¼ä¸[ElasticSearch æ•°æ®æ ¼å¼ä¸­](https://github.com/vuestorefront/vue-storefront/blob/master/doc/ElasticSearch data formats.md)æè¿°çš„ç›¸åŒ[ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/master/doc/ElasticSearch data formats.md)-`product`ç­çº§ï¼›å”¯ä¸€çš„åŒºåˆ«`qty`æ˜¯æ·»åŠ äº† (int)å­—æ®µ

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#events)æ´»åŠ¨

ä»¥ä¸‹äº‹ä»¶æ˜¯ä»`cart`å•†åº—å‘å¸ƒçš„ï¼š

- `EventBus.$emit('cart-after-itemchanged', { item: cartItem })` - ä¹‹åæ‰§è¡Œ [`servercart-after-itemupdated` ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/c43b2966a9ae10661e5a62b10445403ed9789b32/core/store/modules/cart/index.js#L108)- æœåŠ¡å™¨è´­ç‰©è½¦åŒæ­¥åï¼Œè¡¨ç¤ºç‰¹å®šè´­ç‰©è½¦é¡¹ç›®å·²æ›´æ”¹ï¼›`Microcart/Product.vue`ç»„ä»¶è®¢é˜…æ­¤äº‹ä»¶ä»¥åˆ·æ–°è´­ç‰©è½¦ UI
- `EventBus.$emit('cart-before-add', { product: item })` - åœ¨äº§å“æ·»åŠ åˆ°è´­ç‰©è½¦åè§¦å‘ï¼Œ
- `EventBus.$emit('cart-before-save', { items: state.cartItems })` - åœ¨ä¿å­˜äº§å“è´­ç‰©è½¦åè§¦å‘ï¼Œ
- `EventBus.$emit('cart-before-delete', { items: state.cartItems })` - åœ¨ä½¿ç”¨å½“å‰è´­ç‰©è½¦çŠ¶æ€åˆ é™¤è´­ç‰©è½¦é¡¹ç›®ä¹‹å‰è§¦å‘çš„äº‹ä»¶ï¼ˆåˆ é™¤é¡¹ç›®ä¹‹å‰ï¼‰
- `EventBus.$emit('cart-after-delete', { items: state.cartItems })` - åœ¨ä½¿ç”¨å½“å‰è´­ç‰©è½¦çŠ¶æ€åˆ é™¤è´­ç‰©è½¦é¡¹ç›®ä¹‹å‰è§¦å‘çš„äº‹ä»¶ï¼ˆåˆ é™¤é¡¹ç›®ä¹‹åï¼‰
- `EventBus.$emit('cart-before-itemchanged', { item: record })`- åœ¨è¦æ›´æ”¹ç‰¹å®šé¡¹ç›®å±æ€§ä¹‹å‰è°ƒç”¨çš„é¡¹ç›®ï¼›ä¾‹å¦‚è°ƒç”¨æ—¶[`servercart-after-itemupdated` ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/c43b2966a9ae10661e5a62b10445403ed9789b32/core/store/modules/cart/index.js#L108)å°†è¦æ›´æ”¹`server_item_id`å±æ€§
- `EventBus.$emit('cart-after-itemchanged', { item: record })`- åœ¨æ›´æ”¹ç‰¹å®šé¡¹ç›®å±æ€§åè°ƒç”¨çš„é¡¹ç›®ï¼›ä¾‹å¦‚è°ƒç”¨æ—¶[`servercart-after-itemupdated` ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/c43b2966a9ae10661e5a62b10445403ed9789b32/core/store/modules/cart/index.js#L108)å°†è¦æ›´æ”¹`server_item_id`å±æ€§
- `EventBus.$emit('application-after-loaded')`-`cart/load`åœ¨åˆ†æ´¾åŠ¨ä½œåè°ƒç”¨çš„äº‹ä»¶ï¼Œä»¥é€šçŸ¥è´­ç‰©è½¦å¯ç”¨ï¼Œ
- `EventBus.$emit('cart-after-updatetotals', { platformTotals: totals, platformTotalSegments: platformTotalSegments })`- åœ¨ Magento çš„æ€»æ•°ä¸å½“å‰çŠ¶æ€åŒæ­¥åè°ƒç”¨çš„äº‹ä»¶ï¼›åªæœ‰åœ¨`cart.synchronize_totals`å¯ç”¨é€‰é¡¹æ—¶æ‰ä¼šå‘å‡ºå®ƒã€‚

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#actions)è¡ŒåŠ¨

è´­ç‰©è½¦å•†åº—æä¾›ä»¥ä¸‹å…¬å…±æ“ä½œï¼š

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#disconnect-context)`disconnect (context)`

ç”¨äºæ¸…é™¤å½“å‰æœåŠ¡å™¨è´­ç‰©è½¦idçš„Helperæ–¹æ³•ï¼ˆç”¨äºè´­ç‰©è½¦åŒæ­¥ï¼‰

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#clear-context)`clear (context)`

åœ¨ä¸‹è®¢å•åè°ƒç”¨æ­¤æ–¹æ³•ä»¥æ¸…ç©º`cartItems`é›†åˆå¹¶åœ¨`cart.synchronize_totals`è®¾ç½®ä¸º trueæ—¶åˆ›å»ºæ–°çš„æœåŠ¡å™¨è´­ç‰©è½¦

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#save-context)`save (context)`

ç”¨äºå°†è´­ç‰©è½¦ä¿å­˜åˆ°`localForage`æµè§ˆå™¨é›†åˆçš„æ–¹æ³•

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#sync-context-forceclientstate-false)`sync (context, { forceClientState = false })`

æ­¤æ–¹æ³•ç”¨äºåœ¨æœåŠ¡å™¨å’Œå½“å‰å®¢æˆ·ç«¯çŠ¶æ€ä¹‹é—´æ¥å›åŒæ­¥è´­ç‰©è½¦é¡¹ç›®çš„å½“å‰çŠ¶æ€ã€‚å½“`forceClientState`è®¾ç½®ä¸º false æ—¶ï¼Œé€šä¿¡æ˜¯å•å‘çš„ï¼ˆå®¢æˆ·ç«¯ -> æœåŠ¡å™¨ï¼‰ã€‚å½“`cart.synchronize`è®¾ç½®ä¸º trueæ—¶ï¼Œä¼šåœ¨ä»»ä½•è´­ç‰©è½¦æ›´æ”¹æ—¶è‡ªåŠ¨è°ƒç”¨æ­¤æ“ä½œã€‚

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#synctotals-context-forceclientstate-false)`syncTotals (context, { forceClientState = false })`

æ¯å½“è´­ç‰©è½¦æ€»æ•°åº”è¯¥ä¸æœåŠ¡å™¨åŒæ­¥æ—¶ï¼ˆåœ¨ ä¹‹å`serverPull`ï¼‰ï¼Œå°±ä¼šè°ƒç”¨æ–¹æ³•ã€‚æ­¤æ–¹æ³•è¦†ç›–æœ¬åœ°è´­ç‰©è½¦æ€»è®¡å’Œç‰¹å®šé¡¹ç›®å€¼ï¼ˆä¾‹å¦‚æŠ˜æ‰£åçš„ä»·æ ¼ï¼‰ã€‚

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#connect-context-guestcart-false)`connect (context, { guestCart = false })`

åˆ†æ´¾æ“ä½œä»¥åˆ›å»ºæœåŠ¡å™¨è´­ç‰©è½¦å¹¶å­˜å‚¨è´­ç‰©è½¦ IDï¼ˆç”¨äºè¿›ä¸€æ­¥åŒæ­¥ï¼‰

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#load-context)`load (context)`

æ­¤æ–¹æ³•ä»`localForage`æµè§ˆå™¨çŠ¶æ€ç®¡ç†åŠ è½½è´­ç‰©è½¦é¡¹ç›®ã€‚

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#getitem-commit-dispatch-state-sku)`getItem ({ commit, dispatch, state }, sku)`

æ­¤æ“ä½œç”¨äºæœç´¢è´­ç‰©è½¦ä¸­çš„ç‰¹å®šå•†å“ï¼ˆæŒ‰ SKUï¼‰

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#additem-commit-dispatch-state-producttoadd-forceserversilence-false)`addItem ({ commit, dispatch, state }, { productToAdd, forceServerSilence = false })`

æ­¤æ“ä½œç”¨äºæ·»åŠ `productToAdd`åˆ°è´­ç‰©è½¦ï¼Œå¦‚æœ`config.cart.synchronize`è®¾ç½®ä¸º true ï¼Œåˆ™éšåè°ƒç”¨çš„ä¸‹ä¸€ä¸ªæ“ä½œå°†`serverPull`åŒæ­¥è´­ç‰©è½¦ã€‚`cart-before-add`æ¯å½“æ–°äº§å“è¿›å…¥è´­ç‰©è½¦æ—¶éƒ½ä¼šè°ƒç”¨è¯¥äº‹ä»¶ã€‚è¯¥é€‰é¡¹`forceServerSilence`ç”¨äºç»•è¿‡æœåŠ¡å™¨åŒæ­¥ï¼Œä¾‹å¦‚ï¼Œåœ¨...åŒæ­¥è¿‡ç¨‹ä¸­æ·»åŠ é¡¹ç›®ä»¥é¿å…å¾ªç¯åŒæ­¥å‘¨æœŸã€‚

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#removeitem-commit-dispatch-product)`removeItem ({ commit, dispatch }, product)`

æ­£å¦‚æ‚¨æƒ³è±¡çš„é‚£æ · ğŸ˜ƒ æ­¤æ“ä½œåªæ˜¯å°†äº§å“ä»è´­ç‰©è½¦ä¸­ç§»é™¤ï¼Œå¹¶åœ¨è®¾ç½®æ—¶åŒæ­¥æœåŠ¡å™¨è´­ç‰©è½¦ã€‚æ‚¨å¿…é¡»è‡³å°‘æŒ‡å®š`product.sku`.

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#updatequantity-commit-dispatch-product-qty-forceserversilence-false)`updateQuantity ({ commit, dispatch }, { product, qty, forceServerSilence = false })`

æ¯å½“ç”¨æˆ·æ›´æ”¹è´­ç‰©è½¦ä¸­çš„äº§å“æ•°é‡ï¼ˆä» è°ƒç”¨ï¼‰æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨æ­¤æ–¹æ³•`Microcart.vue`ã€‚è¯¥å‚æ•°`qty`æ˜¯äº§å“çš„æ–°æ•°é‡ï¼Œé€šè¿‡ä½¿ç”¨`forceServerSilence`æ‚¨å¯ä»¥æ§åˆ¶æ˜¯å¦æ­£åœ¨æ‰§è¡ŒæœåŠ¡å™¨è´­ç‰©è½¦åŒæ­¥ã€‚

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#updateitem-commit-product)`updateItem ({ commit }, { product })`

æ›´æ–°é¡¹ç›®å±æ€§ã€‚

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#syncpaymentmethods-context)`syncPaymentMethods (context)`

ä»åç«¯è·å–ä»˜æ¬¾æ–¹å¼åˆ—è¡¨å¹¶å°†å®ƒä»¬ä¿å­˜åˆ°`cart.payment`å­˜å‚¨çŠ¶æ€ã€‚

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#syncshippingmethods-context-address)`syncShippingMethods (context, address)`

ä»åç«¯è·å–è¿è¾“æ–¹å¼åˆ—è¡¨å¹¶å°†å®ƒä»¬ä¿å­˜åˆ°`cart.shipping`å­˜å‚¨çŠ¶æ€ã€‚å›½å®¶ ID åœ¨å¼ºåˆ¶`address`å‚æ•°ä¸­ä¼ é€’ç»™æ­¤æ–¹æ³•ã€‚

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#synctotals-context-methodsdata)`syncTotals (context, methodsData)`

æ­¤æ–¹æ³•å‘åç«¯å‘é€è¯·æ±‚ä»¥æ”¶é›†è´­ç‰©è½¦æ€»æ•°ã€‚å®ƒæ ¹æ®ä»˜æ¬¾å’Œè¿è¾“æ–¹å¼ä¿¡æ¯æ˜¯å¦å¯ç”¨æ¥è°ƒç”¨ä¸åŒçš„åç«¯ç«¯ç‚¹ã€‚

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#getters)å¸æ°”å‰‚

æ‰€æœ‰çŠ¶æ€æˆå‘˜éƒ½åº”è¯¥åªèƒ½ç”± getter è®¿é—®ã€‚è¯·æŸ¥çœ‹æ•°æ®æ ¼å¼çš„çŠ¶æ€å‚è€ƒ

- `getCartToken`- è·å–å½“å‰çš„è´­ç‰©è½¦ä»¤ç‰Œï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™æ„å‘³ç€æˆ‘ä»¬éœ€è¦`cart/connect`åœ¨ä¸æœåŠ¡å™¨åŒæ­¥ä¹‹å‰è°ƒç”¨ä¸€ä¸ªæ“ä½œï¼Œ
- `getLastSyncDate` - è¿™æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œæœ€åä¸€æ¬¡è´­ç‰©è½¦ä¸æœåŠ¡å™¨åŒæ­¥çš„æ—¶é—´æˆ³
- `getLastTotalsSyncDate` - æ•´æ•°ï¼Œä¸æœåŠ¡å™¨åŒæ­¥çš„æœ€åæ€»æ•°çš„æ—¶é—´æˆ³ï¼Œ
- `getShippingMethod` - å¯¹è±¡ï¼Œåœ¨ç»“å¸ä¸­è·å–å½“å‰é€‰æ‹©çš„è¿è¾“æ–¹å¼ï¼Œ
- `getPaymentMethod` - å¯¹è±¡ï¼Œè·å–åœ¨ç»“å¸ä¸­é€‰æ‹©çš„å½“å‰ä»˜æ¬¾æ–¹å¼ï¼Œ
- `getLastCartHash`- è·å–æœ€åä¿å­˜çš„è´­ç‰©è½¦é¡¹ç›®çš„å“ˆå¸Œ/HMAC + æœåŠ¡å™¨ä»¤ç‰Œï¼Œè®©æ‚¨å¯ä»¥è·Ÿè¸ªè¿è¾“è½¦çš„å˜åŒ–ã€‚æœåŠ¡å™¨åŒæ­¥æ­£åœ¨ä¿å­˜å“ˆå¸Œï¼Œ
- `getCurrentCartHash`- è·å–è´­ç‰©è½¦é¡¹ç›®çš„å½“å‰å“ˆå¸Œ/HMAC + æœåŠ¡å™¨ä»¤ç‰Œã€‚å°†å®ƒä¸`getLastCartHash`å€¼è¿›è¡Œæ¯”è¾ƒï¼Œè®©æ‚¨çŸ¥é“æˆ‘ä»¬æ˜¯å¦éœ€è¦æœåŠ¡å™¨åŒæ­¥ï¼Œ
- `isCartHashChanged`-æ¯”è¾ƒ`getLastCartHash`ä¸`getCurrentCartHash`ä»¥éªŒè¯æ˜¯å¦éœ€è¦ä¸€å°æœåŠ¡å™¨åŒæ­¥ä¸å¦ï¼Œ
- `isSyncRequired`- æ£€æŸ¥æ˜¯å¦`isCartHashChanged`ä¸ºçœŸæˆ–è¿™æ˜¯ç¬¬ä¸€æ¬¡åŒæ­¥å°è¯•ï¼ˆåœ¨ SSR ä¹‹åï¼‰ï¼Œ
- `isTotalsSyncRequired`- ä¸`isSyncRequired`ä½†æ€»è®¡ï¼ˆä¸æ˜¯è´­ç‰©è½¦é¡¹ç›®ï¼‰ç›¸åŒï¼Œ
- `isCartHashEmtpyOrChanged`- æ£€æŸ¥æ˜¯å¦ä¸º`isCartHashChanged`ç©ºï¼Œ
- `getCartItems` - è´­ç‰©è½¦ä¸­çš„ä¸€ç³»åˆ—äº§å“ï¼Œ
- `isTotalsSyncEnabled`- æ£€æŸ¥æ˜¯å¦`config.cart.synchronize`ä¸ºçœŸ + å¦‚æœæˆ‘ä»¬åœ¨çº¿ + å¦‚æœè¿™æ˜¯ CSR è¯·æ±‚ï¼Œ
- `isCartConnected`- æ£€æŸ¥æ˜¯å¦`getCartToken`ä¸ä¸ºç©º - è¿™æ„å‘³ç€è¯¥`cart/connect`æ“ä½œå·²è¢«è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä¸æœåŠ¡å™¨åŒæ­¥ï¼Œ
- `isCartSyncEnabled`- ä¸`isTotalsSyncEnabled`æ€»è®¡ï¼ˆ`config.cart.synchronize_totals`æ ‡å¿—ï¼‰ç›¸åŒï¼Œ
- `getTotals` - åŒ…å«æ€»æ®µçš„æ•°ç»„ï¼Œ
- `getItemsTotalQuantity` - è·å–è´­ç‰©è½¦ä¸­æ‰€æœ‰å•†å“çš„æ€»å’Œï¼Œ
- `getCoupon` - è·å–å½“å‰åº”ç”¨çš„æŠ˜æ‰£ä»£ç ï¼Œ

## [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#user-module)ç”¨æˆ·æ¨¡å—

è¯¥æ¨¡å—åŒ…å«ä¸ç”¨æˆ·å¸æˆ·ç›¸å…³çš„æ‰€æœ‰é€»è¾‘ã€ç»„ä»¶å’Œå­˜å‚¨

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#components-2)æˆåˆ†

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#accountbutton)å¸æˆ·æŒ‰é’®

å¤„ç†é‡å®šå‘åˆ°ç”¨æˆ·å¸æˆ·é¡µé¢å’Œç”¨æˆ·æ³¨é”€çš„ç»„ä»¶ã€‚é€šå¸¸ç”¨äºæ ‡é¢˜ã€‚

**è®¡ç®—**

- `isLoggedIn` - è¡¨ç¤ºç”¨æˆ·æ˜¯å¦å·²ç™»å½•ï¼›
- `user` - å½“å‰ç”¨æˆ·ã€‚

**æ–¹æ³•**

- `goToAccount`- ç”¨æˆ·æ˜¯å¦å·²ç™»å½•ï¼Œå°†ç”¨æˆ·é‡å®šå‘åˆ°å¸æˆ·é¡µé¢ã€‚å¦åˆ™æ˜¾ç¤ºæ³¨å†Œæ¨¡å¼
- `logout`- å‘å‡º`user-before-logout`äº‹ä»¶å¹¶å°†ç”¨æˆ·é‡å®šå‘åˆ°ä¸»é¡µ

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#login)ç™»å½•

**æ–¹æ³•**

- `close` - å…³é—­æ³¨å†Œæ¨¡å¼
- `callLogin`- å¯åŠ¨èº«ä»½éªŒè¯è¿‡ç¨‹ï¼Œä½¿ç”¨ç”¨æˆ·çš„ç”µå­é‚®ä»¶å’Œå¯†ç å‘å‡º`notification-progress-start`ï¼Œè°ƒç”¨`user/login`æ“ä½œã€‚
- `switchElem`-`setAuthElem`ä½¿ç”¨`register`å‚æ•°è§¦å‘çªå˜
- `callForgotPassword`-`setAuthElem`ä½¿ç”¨`forgot-pass`å‚æ•°è§¦å‘çªå˜

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#register)ç™»è®°

**æ–¹æ³•**

- `switchElem`-`setAuthElem`ä½¿ç”¨`register`å‚æ•°è§¦å‘çªå˜
- `close` - å…³é—­æ³¨å†Œæ¨¡å¼
- `callRegister`-ä½¿ç”¨ç”¨æˆ·çš„ç”µå­é‚®ä»¶ã€å¯†ç ã€åå­—å’Œå§“æ°å¼€å§‹æ³¨å†Œè¿‡ç¨‹ï¼Œå‘å‡º`notification-progress-start`ã€è°ƒç”¨`user/register`æ“ä½œã€‚

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#useraccount)ç”¨æˆ·å¸å·

**æ–¹æ³•**

- `onLoggedIn`- è®¾ç½®`currentUser`å’Œ`userCompany`ã€‚æ­¤æ–¹æ³•åœ¨`user-after-loggedin`æ€»çº¿äº‹ä»¶ä¸Šè°ƒç”¨
- `edit`- å°†`isEdited`æ ‡å¿—è®¾ç½®ä¸º`true`
- `objectsEqual (a, b, excludedFields = [])` - æ£€æŸ¥ä¸¤ä¸ªä¼ é€’çš„å¯¹è±¡æ˜¯å¦å½¼æ­¤ç›¸ç­‰
- `updateProfile`- ä½¿ç”¨æ–°æ•°æ®æ›´æ–°ç”¨æˆ·é…ç½®æ–‡ä»¶ã€‚è°ƒç”¨æ–¹æ³•`exitSection(null, updatedProfile)`
- `exitSection`-`myAccount-before-updateUser`ä½¿ç”¨æ›´æ–°çš„ç”¨æˆ·é…ç½®æ–‡ä»¶å‘å‡ºæ€»çº¿äº‹ä»¶ã€‚å°†ç»„ä»¶ç”¨æˆ·æ•°æ®é‡ç½®ä¸ºé»˜è®¤å€¼ã€‚
- `getUserCompany` - æ‰¾åˆ°ç”¨æˆ·å…¬å¸
- `getCountryName` - æŸ¥æ‰¾ç”¨æˆ·å›½å®¶åç§°

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#usershippingdetails)ç”¨æˆ·å‘è´§è¯¦æƒ…

**æ–¹æ³•**

- `onLoggedIn`- è®¾ç½®`currentUser`å’Œ`shippingDetails`ã€‚æ­¤æ–¹æ³•åœ¨`user-after-loggedin`æ€»çº¿äº‹ä»¶ä¸Šè°ƒç”¨
- `edit`- å°†`isEdited`æ ‡å¿—è®¾ç½®ä¸º`true`
- `updateDetails`- ä½¿ç”¨æ–°æ•°æ®æ›´æ–°è¿è¾“è¯¦ç»†ä¿¡æ¯ã€‚è°ƒç”¨æ–¹æ³•`updatedShippingDetails`
- `exitSection`- å‘å‡º`myAccount-before-updateUser`å¸¦æœ‰æ›´æ–°è¿è¾“è¯¦ç»†ä¿¡æ¯çš„æ€»çº¿äº‹ä»¶ã€‚å°†ç»„ä»¶ç”¨æˆ·æ•°æ®é‡ç½®ä¸ºé»˜è®¤å€¼
- `fillCompanyAddress` - æŸ¥æ‰¾è¿è¾“è¯¦ç»†ä¿¡æ¯
- `getCountryName` - æŸ¥æ‰¾å›½å®¶åç§°
- `hasBillingAddres`-`true`å¦‚æœç”¨æˆ·æœ‰è´¦å•åœ°å€åˆ™è¿”å›

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#store-3)åº—é“º

ç”¨æˆ·å­˜å‚¨æ—¨åœ¨å¤„ç†ä¸ç”¨æˆ·å¸æˆ·ç›¸å…³çš„æ‰€æœ‰æ“ä½œã€‚æ‰€æœ‰ä¸ç”¨æˆ·ç›¸å…³çš„æ•°æ®éƒ½å­˜å‚¨åœ¨åŸå§‹ç”µå­å•†åŠ¡ CMS/Magento ä¸­ï¼Œä¿®æ”¹æ“ä½œç›´æ¥é’ˆå¯¹å¹³å° API æ‰§è¡Œã€‚

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#state-2)çŠ¶æ€

```js
  state: {
    token: '',
    current: null
  },
```

ç”¨æˆ·çŠ¶æ€æ•°æ®ï¼š

- `token` - è¿™æ˜¯ä»å½“å‰ç”¨æˆ·è·å¾—çš„ä»¤ç‰Œ [`user/login` ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/fabea12dd6ab4f8824b58812b0cfdabce94cde70/core/store/modules/user/actions.js#L64). å®ƒç”¨äºä½¿ç”¨å½“å‰ç”¨æˆ·èº«ä»½æˆæƒæ‰€æœ‰åç»­è°ƒç”¨ã€‚å¦‚æœæ­¤ä»¤ç‰Œä¸ä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºç”¨æˆ·å·²è·å¾—æˆæƒã€‚
- `current` - è¿™æ˜¯ä»æ¥æ”¶åˆ°çš„å½“å‰ç”¨æˆ·å¯¹è±¡ [`user/me` ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/fabea12dd6ab4f8824b58812b0cfdabce94cde70/core/store/modules/user/actions.js#L105)- åœ¨ç™»å½•æ“ä½œåç«‹å³è°ƒç”¨ã€‚

ç”¨æˆ·æ•°æ®æ ¼å¼ï¼š

```json
{
  "code": 200,
  "result": {
    "id": 58,
    "group_id": 1,
    "default_billing": "62",
    "default_shipping": "48",
    "created_at": "2018-01-23 15:30:00",
    "updated_at": "2018-03-04 06:39:28",
    "created_in": "Default Store View",
    "email": "pkarwatka28@example.pl",
    "firstname": "Piotr",
    "lastname": "Karwatka",
    "store_id": 1,
    "website_id": 1,
    "addresses": [
      {
        "id": 48,
        "customer_id": 58,
        "region": {
          "region_code": null,
          "region": null,
          "region_id": 0
        },
        "region_id": 0,
        "country_id": "PL",
        "street": ["Street", "12"],
        "telephone": "",
        "postcode": "51-169",
        "city": "City",
        "firstname": "Piotr",
        "lastname": "Karwatka",
        "default_shipping": true
      },
      {
        "id": 62,
        "customer_id": 58,
        "region": {
          "region_code": null,
          "region": null,
          "region_id": 0
        },
        "region_id": 0,
        "country_id": "PL",
        "street": ["Street", "12"],
        "company": "example",
        "telephone": "",
        "postcode": "51-169",
        "city": "City",
        "firstname": "Piotr",
        "lastname": "Karwatka",
        "vat_id": "PL8951930748",
        "default_billing": true
      }
    ],
    "disable_auto_group_change": 0
  }
}
```

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#events-2)æ´»åŠ¨

ä»¥ä¸‹äº‹ä»¶æ˜¯ä»`user`å•†åº—å‘å¸ƒçš„ï¼š

- `EventBus.$emit('session-after-started')`-[åœ¨åº”ç”¨ç¨‹åºåŠ è½½åç«‹å³](https://github.com/vuestorefront/vue-storefront/blob/fabea12dd6ab4f8824b58812b0cfdabce94cde70/core/store/modules/user/actions.js#L22)æ‰§è¡Œ[ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/fabea12dd6ab4f8824b58812b0cfdabce94cde70/core/store/modules/user/actions.js#L22)å¹¶ä¸”ç”¨æˆ·ç•Œé¢ä¼šè¯å·²ç»å¼€å§‹
- `EventBus.$emit('user-after-loggedin', res)`- åœ¨æˆåŠŸçš„[åŠ¨ä½œè°ƒç”¨](https://github.com/vuestorefront/vue-storefront/blob/fabea12dd6ab4f8824b58812b0cfdabce94cde70/core/store/modules/user/actions.js#L123)åæ‰§è¡Œ[`user/me` ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/fabea12dd6ab4f8824b58812b0cfdabce94cde70/core/store/modules/user/actions.js#L123)- è¿™æ ·çš„ç”¨æˆ·å·²è¢«æˆæƒå’Œé…ç½®æ–‡ä»¶åŠ è½½

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#actions-2)è¡ŒåŠ¨

ç”¨æˆ·å•†åº—æä¾›äº†ä»¥ä¸‹çš„å…¬å…±è¡Œä¸ºï¼š

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#startsession-context)`startSession (context)`

åªæ˜¯ä¸ºäº†æ ‡è®°ä¼šè¯å¯åŠ¨å’ŒåŠ è½½ä»ä»¤ç‰Œå½“å‰ç”¨æˆ·`localForage`-ä¸ºè¿›ä¸€æ­¥ä½¿ç”¨ã€‚

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#resetpassword-context-email)`resetPassword (context, { email })`

è°ƒç”¨`vue-storefront-api`ç«¯ç‚¹å‘é€å¯†ç é‡ç½®é“¾æ¥åˆ°æŒ‡å®š`email`åœ°å€

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#login-context-username-password)`login (context, { username, password })`

ç§°ä¸ºç™»å½•ç”¨æˆ·å’Œæ¥æ”¶å¯ä»¥ç”¨äºæˆæƒåç»­APIè°ƒç”¨çš„å½“å‰ä»¤ç‰Œã€‚ç”¨æˆ·æˆåŠŸæˆæƒåï¼Œ`user/me`å°†è°ƒåº¦æ“ä½œä»¥åŠ è½½ç”¨æˆ·é…ç½®æ–‡ä»¶æ•°æ®ã€‚

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#register-context-email-firstname-lastname-password)`register (context, { email, firstname, lastname, password })`

åœ¨æ³¨å†Œçš„ç”µå­å•†åŠ¡å¹³å°/ Magentoçš„ç”¨æˆ·å¸æˆ·ã€‚

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#me-context-refresh-true-usecache-true)`me (context, { refresh = true, useCache = true })`

åŠ è½½ä»ç”µå­å•†åŠ¡CMSç”¨æˆ·é…ç½®æ–‡ä»¶; å½“`userCache`è®¾ç½®ä¸ºtrueç»“æœå°†è¢«å­˜å‚¨åœ¨`localForage`ï¼Œå¦‚æœå®ƒä¹‹å‰å­˜å‚¨-ä½¿ç”¨ä»ç¼“å­˜è¿”å›`fastest`ç­–ç•¥ï¼ˆç½‘ç»œVSé«˜é€Ÿç¼“å­˜ï¼‰ã€‚å¦‚æœ`refresh`è®¾ç½®ä¸ºtrue -ç”¨æˆ·æ•°æ®å°†ä¼šä»æœåŠ¡å™¨ä¸Šæ‹‰ï¼Œå°½ç®¡ç¼“å­˜å‰¯æœ¬æ˜¯å¯ç”¨çš„ã€‚

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#update-context-userdata)`update (context, userData)`

è¿™ä¸ªåŠ¨ä½œæ˜¯ç”¨æ¥æ›´æ–°å„ç§ç”¨æˆ·é…ç½®æ–‡ä»¶æ•°æ®ã€‚è¯·æ£€æŸ¥[ç”¨æˆ·æ¶æ„ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/master/core/store/modules/user/userProfile.schema.json)æœ‰å…³æ•°æ®æ ¼å¼çš„è¯¦ç»†ä¿¡æ¯ã€‚

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#changepassword-context-passworddata)`changePassword (context, passwordData)`

è¯•å›¾æ›´æ”¹ç”¨æˆ·å¯†ç `passwordData.newPassword`ã€‚

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#logout-context)`logout (context)`

è¿™æ˜¯ç”¨æ¥æ³¨é”€ç”¨æˆ·å…³é—­ä¼šè¯å¹¶æ¸…é™¤ç”¨æˆ·ä»¤ç‰Œã€‚è¯·æ³¨æ„ - å½“å‰çš„è´­ç‰©è½¦æ˜¯æ­¤è°ƒç”¨åå…³é—­ã€‚

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#getters-2)å¸æ°”å‰‚

æ‰€æœ‰çŠ¶æ€æˆå‘˜éƒ½åº”è¯¥åªèƒ½ç”± getter è®¿é—®ã€‚è¯·æŸ¥çœ‹æ•°æ®æ ¼å¼çš„çŠ¶æ€å‚è€ƒ

```js
const getters = {
  isLoggedIn(state) {
    return state.current !== null;
  },
};
```

## [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#checkout-module)ç»“è´¦æ¨¡å—

ç»“å¸æ¨¡å—æ—¨åœ¨å¤„ç†ä¸ç»“å¸æ“ä½œå’Œ UI ç›¸å…³çš„æ‰€æœ‰é€»è¾‘ã€‚

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#components-3)æˆåˆ†

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#cartsummary)CartSummary

æ­¤ç»„ä»¶æ˜¾ç¤ºè´­ç‰©è½¦æ±‡æ€»ä¿¡æ¯

**è®¡ç®—**

- `totals` - æ˜ å°„å¸æ°”æ¥æ˜¾ç¤ºè½¦æ±‡æ€»

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#orderreview)è®¢å•å®¡æ ¸

å½“å‰çš„è®¢å•æ‘˜è¦

**é“å…·**

- `isActive` - å¸ƒå°”å€¼ï¼Œéœ€è¦çš„é“å…·

**æ–¹æ³•**

- `placeOrder`-å¦‚æœå½“å‰ç”¨æˆ·å…·æœ‰å¸æˆ·æ£€æŸ¥ã€‚å¦‚æœä¸æ˜¯ï¼Œå°†è§¦å‘ä¸€ä¸ª`register`æ–¹æ³•ï¼Œå¦åˆ™ä¼šå‘å‡º`checkout-before-placeOrder`æ€»çº¿äº‹ä»¶
- `register`- è°ƒåº¦ä¸€ä¸ª`user/register`åŠ¨ä½œæ¥æ³¨å†Œä¸€ä¸ªæ–°ç”¨æˆ·

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#payment)æ”¯ä»˜

ä¸€ä¸ªç»„ä»¶æ¥å¤„ç†æ”¯ä»˜ä¸šåŠ¡

**é“å…·**

- `isActive` - å¸ƒå°”å€¼ï¼Œéœ€è¦çš„é“å…·

**è®¡ç®—**

- `currentUser` - å½“å‰ç”¨æˆ·ä»åº”ç”¨çŠ¶æ€æ˜ å°„
- `paymentMethods`-å¯ç”¨çš„ä»˜æ¬¾æ–¹å¼ä»æ˜ å°„`payment/paymentMethods`çš„getter

**æ–¹æ³•**

- `sendDataToCheckout`-å‘å‡º`checkout-after-paymentDetails`æ€»çº¿äº‹ä»¶ï¼Œå¹¶è®¾ç½®`isFilled`åˆ°`true`
- `edit`- æ£€æŸ¥`isFilled`ï¼Œå¦‚æœæ˜¯`true`ï¼Œåˆ™å‘å‡º`checkout-before-edit`æ€»çº¿äº‹ä»¶
- `hasBillingData` - æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå®ƒæœ‰`default_billing_è´¢äº§
- `initializeBillingAddress`-æ£€æŸ¥æ˜¯å¦å½“å‰ç”¨æˆ·å­˜åœ¨ï¼Œå¹¶ä¸”å¦‚æœå®ƒå…·æœ‰`default_billing`å±æ€§; å¦‚æœæ˜¯è¿™æ ·ï¼Œå¡«å……`payment`ç”¨å½“å‰ç”¨æˆ·çš„åœ°å€æ•°æ®çš„æ•°æ®å±æ€§
- `useShippingAddress`-å¡«å……`payment`æ•°æ®å±æ€§`$store.state.checkout.shippingDetails`
- `useBillingAddress`-å¡«å……`payment`æ•°æ®å±æ€§`currentUser.addressess`
- `useGenerateInvoice`-å¦å®šçš„`generateInvoice`ä»·å€¼ï¼Œå¦‚æœå®ƒå˜æˆ`false`ï¼Œå°†å¤ä½`this.payment.company`å’Œ`this.payment.taxId`
- `getCountryName` - é€šè¿‡å›½å®¶/åœ°åŒºä»£ç è·å–å½“å‰ä»˜æ¬¾çš„å›½å®¶/åœ°åŒºåç§°
- `getPaymentMethod` - ç”±æ”¯ä»˜æ–¹æ³•çš„ä»£ç è·å–å½“å‰æ”¯ä»˜çš„ä»˜æ¬¾æ–¹å¼æ ‡é¢˜
- `notInMethods` - æ£€æŸ¥ä¼ é€’çš„æ–¹æ³•æ˜¯å¦å­˜åœ¨äº `paymentMethods`
- `changePaymentMethod`-å¦‚æœå­˜åœ¨ï¼Œå¹¶å¤ä½é¢å¤–æ”¯ä»˜æ–¹æ³•ç»„åˆ†å®¹å™¨å‘å‡º`checkout-payment-method-changed`æ€»çº¿äº‹ä»¶

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#personal-details)ä¸ªäººèµ„æ–™

ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ç»„ä»¶

**é“å…·**

- `isActive` - å¸ƒå°”å€¼ï¼Œéœ€è¦çš„é“å…·
- `focusedField` - ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¾ç¤ºå“ªäº›å­—æ®µè¢«èšç„¦

**è®¡ç®—**

- `currentUser` - å½“å‰ç”¨æˆ·ä»åº”ç”¨çŠ¶æ€æ˜ å°„

**æ–¹æ³•**

- `onLoggedIn`-å¡«å……`personalDetails`æ•°æ®ä½œä¸ºå‚æ•°ä¼ é€’
- `sendDataToCheckout`-æ‰§è¡Œæ£€æŸ¥æ˜¯å¦å·²ç»åˆ›å»ºäº†è´¦æˆ·å¹¶å‘å‡º`checkout-after-personalDetails`æ€»çº¿äº‹ä»¶
- `edit`-å‘å‡º`checkout-before-edit`æ€»çº¿äº‹ä»¶
- `gotoAccount` - æ˜¾ç¤ºäº†æ³¨å†Œæ¨¡å¼

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#product-2)äº§å“

è¡¨ç¤ºäº§å“ç»„ä»¶

**é“å…·**

- `product` - å½“å‰äº§å“

**è®¡ç®—**

- `thumbnail` - è¿”å›äº§å“å›¾åƒçš„ç¼©ç•¥å›¾

**æ–¹æ³•**

- `onProductChanged`-æ£€æŸ¥`event.item.sku`ï¼Œå¦‚æœå®ƒç­‰äº`product.sku`ï¼ŒåŠ›æ›´æ–°å°†è¢«è§¦å‘

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#shipping)èˆ¹è¿

ç»„ä»¶å¤„ç†æ‰€æœ‰çš„èˆªè¿é€»è¾‘

**é“å…·**

- `isActive` - å¸ƒå°”å€¼ï¼Œéœ€è¦çš„é“å…·

**è®¡ç®—**

- `currentUser` - å½“å‰ç”¨æˆ·ä»åº”ç”¨çŠ¶æ€æ˜ å°„
- `shippingMethods`-å¯ç”¨çš„ä»˜æ¬¾æ–¹å¼ä»æ˜ å°„`payment/paymentMethods`çš„getter
- `checkoutShippingDetails` - æ˜ å°„è‡ª `state.checkout.shippingDetails`
- `paymentMethod` - æ˜ å°„è‡ª `state.payment.methods`

**æ–¹æ³•**

- `onAfterShippingSet`-å¡«å……`shipping`ä¸ä¼ é€’çš„å‚æ•°æ•°æ®å±æ€§
- `onAfterPersonalDetail`-æ£€æŸ¥`isFilled`æ•°æ®å±æ€§ï¼Œå¦‚æœå®ƒçš„è™šå‡ï¼Œè°ƒåº¦`checkout/updatePropValue`ä¸ç”¨æˆ·çš„åå­—å’Œå§“æ°
- `sendDataToCheckout`-å‘å°„`checkout-after-shippingDetails`æ€»çº¿äº‹ä»¶; å¥—`isFilled`åˆ°`true`
- `edit`-æ˜¯`isFilled`æ˜¯çœŸå®çš„ï¼Œå‘å‡º`checkout-before-edit`æ€»çº¿äº‹ä»¶ï¼Œå¹¶è®¾ç½®`isFilled`åˆ°`false`
- `hasShippingDetails`-æ£€æŸ¥ï¼Œå¦‚æœ`currentUser`å­˜åœ¨ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªå±æ€§`default_shipping`; å¦‚æœæ˜¯è¿™æ ·ï¼Œå¡«å……`myAddressDetails`æ•°æ®å±æ€§`currentUser.addresses`
- `useMyAddress`-æ£€æŸ¥`shipToMyAddress`; å¦‚æœ`true`ï¼Œå¡«å……`shipping`æ•°æ®å±æ€§`myAddressDetails`
- `getShippingMethod`-è·å–ä»è¿è¾“æ–¹å¼`shippingMethods`çš„æ•°æ®å±æ€§
- `getCountryName` - ä½¿ç”¨å›½å®¶ä»£ç è·å–å›½å®¶åç§°
- `changeCountry`-å‘å‡º`checkout-before-shippingMethods`æ€»çº¿äº‹ä»¶
- `getCurrentShippingMethod` - è®¡ç®—ç”µæµçš„é€è´§æ–¹å¼ä¸èˆªè¿æ³•ç 
- `changeShippingMethod`-å¦‚æœ`getCurrentShippingMethod`å­˜åœ¨ï¼Œå‘å‡º`checkout-after-shippingMethodChanged`æ€»çº¿äº‹ä»¶
- `notInMethods` - æ£€æŸ¥ä¼ é€’çš„æ–¹æ³•æ˜¯å¦å­˜åœ¨äº `shippingMethods`

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#how-to-add-a-custom-checkout-step)å¦‚ä½•æ·»åŠ è‡ªå®šä¹‰ç»“å¸æ­¥éª¤

æˆ‘ä»¬ç°åœ¨è¯´æ˜å¦‚ä½•æ·»åŠ ä¸€ä¸ªæ–°çš„å°é˜¶ï¼Œä»¥Vueå…¬å¸åº—é¢çš„ç»“è´¦é¡µé¢çš„ä¾‹å­ã€‚

æ­¥éª¤å‘½å`NewStep`ï¼Œåªæ˜¯åœ¨åæ”¾ç½®`PersonalDetails`çš„æ­¥éª¤; æ”¹å˜æ­¥çš„åç§°å’Œä½ç½®éœ€è¦ç¨å¾®ä¿®æ”¹ç¨‹åºã€‚

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#first-create-the-newstep-component)é¦–å…ˆï¼Œåˆ›å»ºNewStepç»„ä»¶

1. **åˆ›å»ºNewStepç»„ä»¶**æ ¹æ®æ‚¨çš„éœ€è¦ã€‚è¦è¿…é€Ÿè¡ŒåŠ¨ï¼Œä½¿å‰¯æœ¬`PersonalDetails`ç»„æˆï¼Œå‘½å`NewStep`å¹¶è¿›è¡Œè‡ªå®šä¹‰ã€‚
2. **å®šåˆ¶sendDataToCheckoutæ–¹æ³•**çš„çš„`NewStep`ç»„åˆ†ï¼Œä½¿å¾—å…¶å‘å°„çš„æƒ…å†µä¸‹`checkout-after-newStep`; ä¾‹å¦‚ï¼š

```javascript
    sendDataToCheckout () {
      this.$bus.$emit('checkout-after-newStep', this.newStep, this.$v)
    }
```

1. **è°ƒç”¨sendDataToCheckoutæ–¹æ³•**æ˜¯å•å‡»è¯¥æŒ‰é’®ä¸‹ä¸€èŠ‚æ—¶ã€‚è¿™å¯èƒ½åœ¨è¿™æ ·çš„æ¨¡æ¿æ¥å®ç°ï¼š

```vue
    <button-full
      @click.native="sendDataToCheckout"
    >
```

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#then-modify-the-checkout-component)ç„¶åï¼Œä¿®æ”¹ç»“å¸éƒ¨ä»¶

1. **åœ¨ç»“è´¦æ¨¡æ¿**ä¸­çš„æ‰€éœ€ä½ç½®**æ’å…¥ NewStep ç»„ä»¶**ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥æŠŠå®ƒæ”¾åœ¨ä¸ªäººèµ„æ–™å’Œè¿è¾“æ­¥éª¤ä¹‹é—´ï¼š

```vue
  <personal-details class="line relative" :is-active="activeSection.personalDetails" :focused-field="focusedField"/>
  <new-step class="line relative" :is-active="activeSection.newStep">
  <shipping class="line relative" :is-active="activeSection.shipping" v-if="!isVirtualCart"/>
  <payment class="line relative" :is-active="activeSection.payment"/>
  <order-review class="line relative" :is-active="activeSection.orderReview"/>
```

1. **ç›‘å¬ç»“å¸ånewStepäº‹ä»¶**ä¸­åŠ å…¥ä»¥ä¸‹ç›‘å¬å™¨çš„`beforeMount()`åŠŸèƒ½ï¼š

```javascript
    this.$bus.$on('checkout-after-newStep', this.onAfterNewStep)
```

1. **æŒ‡å®šå¦‚ä½•ä»ä»¥å‰çš„æ­¥éª¤NewStepè·³**ã€‚ä¿®æ”¹`onAfterPersonalDetails()`æ–¹æ³•ä»¥æ¿€æ´»`newStep`éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯`shipping`æ­¥éª¤ï¼š

```javascript
    onAfterPersonalDetails (receivedData, validationResult) {
      this.personalDetails = receivedData
      this.validationResults.personalDetails = validationResult
      this.activateSection('newStep') // show the new step
      this.savePersonalDetails()
      this.focusedField = null
    }
```

è¿™æ˜¯å‡è®¾æ–°çš„ç»“å¸æ­¥éª¤å¦‚ä¸‹ä¸ªäººä¿¡æ¯çš„æ­¥éª¤; å¦‚æœä¸æ˜¯è¿™æ ·çš„è¯ï¼Œä½ å°†éœ€è¦ä¿®æ”¹`onAfter`ä»»ä½•æ­¥éª¤å…ˆçš„æ¢…æ‰˜å¾·`NewStep`ã€‚

1. **æŒ‡å®šå¦‚ä½•ä»NewStepè·³åˆ°ä¸‹ä¸€æ­¥**åˆ›å»ºçš„æ–¹æ³•`onAfterNewStep`; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸‹ä¸€ä¸ªæ­¥éª¤æ˜¯èˆªè¿å½¢å¼ï¼š

```javascript
    onAfterNewStep (receivedData, validationResult) {
      this.newStep = receivedData
      this.validationResults.newStep = validationResult
      this.activateSection('shipping') // change 'shipping' to whatever you want the next step to be
      this.saveNewStep() // include this line only if newStep has state
    }
```

è¯·æ³¨æ„ï¼Œè°ƒç”¨`activateSection('shipping')`æ˜¯æœ€ç»ˆæ˜¾ç¤ºçš„ä¸‹ä¸€ä¸ªç»“å¸æ­¥éª¤ç»™ç”¨æˆ·ã€‚

1. **å¦‚æœéœ€è¦ï¼ŒèŠ‚çœNewStepçŠ¶æ€**é€šè¿‡å®šä¹‰ä¸€ä¸ªéç©ºæ–¹æ³•`saveNewStep()`; ä¾‹å¦‚ï¼š

```javascript
    saveNewStep () {
      this.$store.dispatch('checkout/saveNewStep', this.newStep)
    },
```

è¿™æ˜¯åªéœ€è¦ä½ çš„æ–°æ­¥éª¤éƒ½æœ‰çŠ¶æ€ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ è¿˜éœ€è¦å®šä¹‰`checkout/saveNewStep`åœ¨Vuexè¡ŒåŠ¨ã€‚

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#store-4)åº—é“º

Checkoutå•†åº—æ˜¯ä¸“é—¨ç”¨æ¥å¤„ç†æ¥è‡ªç”¨æˆ·çš„è´­ç‰©è½¦ï¼Œä»¥å®é™…è®¢å•çš„é€šé“; å®ƒå®šä¹‰å¦‚ä¿å­˜åœ¨ç»“å¸æ—¶ç”±ç”¨æˆ·æä¾›çš„ä¿¡æ¯ï¼Œå¹¶æŠŠè¯¥å‘½ä»¤çš„åŠ¨ä½œã€‚

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#state-3)çŠ¶æ€

```js
  state: {
    order: {},
    personalDetails: {
      firstName: '',
      lastName: '',
      emailAddress: '',
      password: '',
      createAccount: false
    },
    shippingDetails: {
      firstName: '',
      lastName: '',
      country: '',
      streetAddress: '',
      apartmentNumber: '',
      city: '',
      state: '',
      region_id: 0,
      zipCode: '',
      phoneNumber: '',
      shippingMethod: ''
    },
    paymentDetails: {
      firstName: '',
      lastName: '',
      company: '',
      country: '',
      streetAddress: '',
      apartmentNumber: '',
      city: '',
      state: '',
      region_id: 0,
      zipCode: '',
      phoneNumber: '',
      taxId: '',
      paymentMethod: '',
      paymentMethodAdditional: {}
    },
    isThankYouPage: false,
    modifiedAt: 0
  }
```

Checkout æ¨¡å—çš„çŠ¶æ€åŒ…å«[Order å¯¹è±¡ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/master/core/models/order.schema.json)å¹¶ä¸”åœ¨ç»“å¸è¿‡ç¨‹ç”±ç”¨æˆ·ç»™å®šçš„ï¼Œè¯¥ä¿¡æ¯è¢«å­˜å‚¨åœ¨è¿›ä¸€æ­¥ä½¿ç”¨`localForage`ã€‚

çŠ¶æ€ç”±æ”¹æ€§ [`placeOrder` ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/1793aaa7afc89b3f08e443f40dd5c6131dd477ba/core/store/modules/checkout/actions.js#L11)è¡ŒåŠ¨å’Œ [`load` ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/1793aaa7afc89b3f08e443f40dd5c6131dd477ba/core/store/modules/checkout/actions.js#L41)å…¶è´Ÿè½½ä»æµè§ˆå™¨çš„æ•°æ®åº“çš„çŠ¶æ€ã€‚

ç±»åˆ«çŠ¶æ€æ•°æ®ï¼š

- `order`- è¿™æ˜¯è¦æ”¾ç½®çš„æœ€åä¸€ä¸ªè®¢å•ï¼Œ[æ¶æ„å·²å®šä¹‰ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/master/core/models/order.schema.json)ç¬¦åˆ Ajv æ ¼å¼
- `shippingDetails`, `paymentDetails`- ç”¨æˆ·åœ¨[ç»“è´¦æ—¶](https://github.com/vuestorefront/vue-storefront/blob/master/core/pages/Checkout.vue)æä¾›çš„åœ°å€ä¿¡æ¯[ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/master/core/pages/Checkout.vue).

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#actions-3)è¡ŒåŠ¨

è´­ç‰©è½¦å•†åº—æä¾›ä»¥ä¸‹å…¬å…±æ“ä½œï¼š

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#placeorder-context-order)`placeOrder (context, { order })`

`Checkout.vue`ä¸ºå®Œæˆè®¢å•è€Œè°ƒç”¨çš„æ“ä½œã€‚æ ¹æ®[è®¢å•æ¨¡å¼](https://github.com/vuestorefront/vue-storefront/blob/master/core/models/order.schema.json)éªŒè¯æ•°æ®å¯¹è±¡[ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/master/core/models/order.schema.json)ï¼Œ`localForage`é€šè¿‡åç»­è°ƒç”¨å­˜å‚¨åœ¨é›†åˆä¸­[`order/placeOrder`ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/1793aaa7afc89b3f08e443f40dd5c6131dd477ba/core/store/modules/order/actions.js#L12)

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#savepersonaldetails-commit-personaldetails)`savePersonalDetails ({ commit }, personalDetails)`

å­˜å‚¨ä¸ªäººè¯¦ç»†ä¿¡æ¯ï¼ˆæ ¼å¼ä¸æ­¤å­˜å‚¨å®Œå…¨ç›¸åŒ`state.personalDetails`ï¼‰ä»¥ä¾›ä»¥ååœ¨æµè§ˆå™¨çš„å­˜å‚¨ä¸­ä½¿ç”¨

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#saveshippingdetails-commit-shippingdetails)`saveShippingDetails ({ commit }, shippingDetails)`

å­˜å‚¨è¿è¾“è¯¦ç»†ä¿¡æ¯ï¼ˆæ ¼å¼ä¸æ­¤å­˜å‚¨å®Œå…¨ç›¸åŒ`state.shippingDetails`ï¼‰ä»¥ä¾›ä»¥ååœ¨æµè§ˆå™¨çš„å­˜å‚¨ä¸­ä½¿ç”¨

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#savepaymentdetails-commit-paymentdetails)`savePaymentDetails ({ commit }, paymentDetails)`

å­˜å‚¨æ”¯ä»˜æ˜ç»†ï¼ˆæ ¼å¼ä¸æœ¬åº—å®Œå…¨ä¸€è‡´`state.paymentDetails`ï¼‰ï¼Œä¾›ä»¥åæµè§ˆå™¨å­˜å‚¨ä½¿ç”¨

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#load-commit)`load ({ commit })`

ä»åŠ è½½å½“å‰çŠ¶æ€ `localForage`

## [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#order-module)è®¢å•æ¨¡å—

è¯¥æ¨¡å—åŒ…å«ä¸è®¢å•æ“ä½œç›¸å…³çš„æ‰€æœ‰é€»è¾‘ã€ç»„ä»¶å’Œå­˜å‚¨ã€‚

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#components-4)æˆåˆ†

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#userorder)ç”¨æˆ·è®¢å•

**è®¡ç®—**

- `ordersHistory` - æ˜ å°„å€¼æ¥è‡ª `state.user.orders_history.items`
- `isHistoryEmpty`- æ£€æŸ¥`state.user.orders_history.items`æ•°ç»„æ˜¯å¦ä¸ºç©º

**æ–¹æ³•**

- `reorder (products)` - éå†ä¼ é€’çš„â€œäº§å“â€æ•°ç»„ï¼Œå°†æ¯ä¸ªé¡¹ç›®æ·»åŠ åˆ°è´­ç‰©è½¦
- `skipGrouped (items)` - è¿‡æ»¤å™¨é€šè¿‡â€œitemsâ€æ•°ç»„ï¼Œåªè¿”å›ä¸å¸¦çš„é¡¹ç›® `parent_id`

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#usersingleorder)ç”¨æˆ·å•ä¸€è®¢å•

**è®¡ç®—**

- `ordersHistory` - æ˜ å°„å€¼æ¥è‡ª `state.user.orders_history.items`
- `order`- åœ¨`orderHistory`è®¡ç®—å±æ€§ä¸­æ‰¾åˆ°ä¸è·¯ç”±`orderId`å‚æ•°åŒ¹é…çš„ idçš„é¡ºåº
- `paymentMethod`-`payment.additional_information[0]`ä»`order`è®¡ç®—å±æ€§è¿”å›
- `billingAddress`-`billing_address`ä»`order`è®¡ç®—å±æ€§è¿”å›
- `shippingAddress`-`extension_attributes.shipping_assignments[0].shipping.address`ä»`order`è®¡ç®—å±æ€§è¿”å›

**æ–¹æ³•**

- `remakeOrder (items)` - éå†ä¼ é€’çš„â€œitemsâ€æ•°ç»„ï¼Œå°†æ¯ä¸ªé¡¹ç›®ä½œä¸ºå•ä¸ªäº§å“æ·»åŠ åˆ°è´­ç‰©è½¦
- `skipGrouped (items)` - è¿‡æ»¤å™¨é€šè¿‡â€œitemsâ€æ•°ç»„ï¼Œåªè¿”å›ä¸å¸¦çš„é¡¹ç›® `parent_id`

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#store-5)åº—é“º

è®¢å•å­˜å‚¨éå¸¸ç®€å•ï¼Œç”¨äºå°†å½“å‰è®¢å•ä¼ é€’ç»™åç«¯æœåŠ¡ã€‚

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#actions-4)è¡ŒåŠ¨

è®¢å•å•†åº—æä¾›ä»¥ä¸‹å…¬å…±æ“ä½œï¼š

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#placeorder-commit-order)`placeOrder ({ commit }, order)`

è®¢å•å¯¹è±¡åœ¨æœ¬åœ° indexedDb ä¸­æ’é˜Ÿç­‰å¾…`ordersCollection`å‘é€åˆ°æœåŠ¡å™¨ã€‚è¯·æŸ¥çœ‹[å¤„ç†æ•°æ®](https://docs.vuestorefront.io/v1/guide/data/data.html)ä»¥äº†è§£æœ‰å…³æ•°æ®æ ¼å¼çš„è¯¦ç»†ä¿¡æ¯ä»¥åŠ`localForage`è¯¥é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨ã€‚

## [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#catalog-module)ç›®å½•æ¨¡å—

Catalog æ¨¡å—æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ¨¡å—ï¼Œå®ƒç»“åˆäº†å±æ€§ã€ç±»åˆ«ã€äº§å“ã€åº“å­˜å’Œç¨åŠ¡æ“ä½œçš„æ‰€æœ‰é€»è¾‘ã€ç»„ä»¶å’Œå­˜å‚¨

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#components-5)æˆåˆ†

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#store-6)åº—é“º

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#attribute-store)å±æ€§å­˜å‚¨

å±æ€§å­˜å‚¨æ—¨åœ¨å¤„ç†ä¸å±æ€§ç®¡ç†ç›¸å…³çš„æ‰€æœ‰æ“ä½œ

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#state-4)çŠ¶æ€

```js
  state: {
    list_by_code: {},
    list_by_id: {},
    labels: {}
  },
```

å› ä¸ºæˆ‘ä»¬ä»¥ä¸ Magento éå¸¸ç›¸ä¼¼çš„æ–¹å¼ä½¿ç”¨å±æ€§å­—å…¸è¿›è¡Œäº§å“ç®¡ç†ï¼ˆ[EAV æ¨¡å‹ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](http://www.xpertdeveloper.com/2010/10/what-is-eav-model-in-magento/)) æˆ‘ä»¬æ­£åœ¨å¯¹å±æ€§ã€å±æ€§ç±»å‹å’Œå­—å…¸è¿›è¡Œæ“ä½œã€‚

å±æ€§ç”±ç”¨æˆ·é€šè¿‡è°ƒç”¨æ–¹æ³•**æ˜¾å¼**åŠ è½½`attribute/list`ã€‚ä¾‹å¦‚ï¼Œå½“æ‚¨è¦å¤„ç†äº§å“çš„å¯è‡ªå®šä¹‰å±æ€§æˆ–å¤„ç†å˜ä½“æ—¶ï¼Œæ‚¨éœ€è¦é¢„å–å±æ€§å…ƒæ•°æ®ï¼š

```js
this.$store.dispatch('attribute/list', {
  filterValues: [true],
  filterField: 'is_user_defined',
});
```

è¿™æ˜¯[äº§å“æ¯”è¾ƒåŠŸèƒ½çš„](https://github.com/vuestorefront/vue-storefront/blob/c954b96f6633a201e10bed1d2e4c0def1aeb3071/core/pages/Compare.vue)ç¤ºä¾‹[ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/c954b96f6633a201e10bed1d2e4c0def1aeb3071/core/pages/Compare.vue).

å±æ€§çŠ¶æ€æ•°æ®ï¼š

- `list_by_code`- è¿™æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œæ‚¨å¯ä»¥é€šè¿‡è®¿é—®`list_by_code['color']`ç­‰æ¥è·å–ç‰¹å®šå±æ€§ã€‚
- `list_by_id`- è¿™æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œæ‚¨å¯ä»¥é€šè¿‡è®¿é—®`list_by_id[123]`ç­‰æ¥è·å–ç‰¹å®šå±æ€§ã€‚
- `labels` - é¢„åŠ è½½çš„å±æ€§å€¼æ ‡ç­¾ï¼ˆEAV ä¸­çš„ Vï¼‰

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#actions-5)è¡ŒåŠ¨

å±æ€§å­˜å‚¨æä¾›ä»¥ä¸‹å…¬å…±æ“ä½œï¼š

**`list (context, { filterValues = null, filterField = 'attribute_code', size = 150, start = 0 })`**

æ­¤æ–¹æ³•ç”¨äºåŠ è½½å±æ€§å…ƒæ•°æ®ã€‚`filterValues`å°±åƒå¤šä¸ªå€¼çš„é˜µåˆ—ï¼š`['color', 'size']`å’Œ`filterField`æ˜¯å±æ€§å­—æ®µæ¥æ¯”è¾ƒ`filterValues`é’ˆå¯¹ã€‚é€šå¸¸æ˜¯`attribute_code`æˆ–`attribute_id`ã€‚è¯¥`size`å’Œ`start`åªæ˜¯ç”¨æ¥é™åˆ¶åˆ—è¡¨ã€‚

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#getters-3)å¸æ°”å‰‚

æ‰€æœ‰çŠ¶æ€æˆå‘˜éƒ½åº”è¯¥åªèƒ½ç”± getter è®¿é—®ã€‚è¯·æŸ¥çœ‹æ•°æ®æ ¼å¼çš„çŠ¶æ€å‚è€ƒ

```js
export default {
  attributeListByCode: state => state.list_by_code,
  attributeListById: state => state.list_by_id,
};
```

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#category-store)å“ç±»å•†åº—

ç±»åˆ«å­˜å‚¨æ—¨åœ¨å¤„ç†ä¸ç±»åˆ«æ•°æ®ç›¸å…³çš„æ‰€æœ‰æ“ä½œã€‚

è¯¥æ¨¡å—ä¸ Elastic Search ç´§å¯†é…åˆï¼Œå¹¶åœ¨[Product æ•°æ®æ ¼å¼ä¸Šè¿è¡Œ](https://docs.vuestorefront.io/v1/guide/data/elasticsearch.html)

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#state-5)çŠ¶æ€

```js
const state = {
  list: [],
  current: {},
  filters: { color: [], size: [], price: [] },
  breadcrumbs: { routes: [] },
  current_path: [], // list of categories from root to current
};
```

ç±»åˆ«çŠ¶æ€é€šå¸¸ä»…ç”±ä¸¤ä¸ªæ–¹æ³•[åˆ—è¡¨](https://github.com/vuestorefront/vue-storefront/blob/06fbb89a5a8bc2c607847f65a7bca9ad54ed7146/core/store/modules/category.js#L38)å¡«å……[ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/06fbb89a5a8bc2c607847f65a7bca9ad54ed7146/core/store/modules/category.js#L38)å’Œ[å•èº« ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/06fbb89a5a8bc2c607847f65a7bca9ad54ed7146/core/store/modules/category.js#L70)å¹¶é€šè¿‡[é‡ç½®](https://github.com/vuestorefront/vue-storefront/blob/06fbb89a5a8bc2c607847f65a7bca9ad54ed7146/core/store/modules/category.js#L28)æ¸…é™¤ä¸ºé»˜è®¤å€¼[ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/06fbb89a5a8bc2c607847f65a7bca9ad54ed7146/core/store/modules/category.js#L28)

ç¬”è®°

è¯¥æ“ä½œä»…`category/single`ä½¿ç”¨`localForage`ç¼“å­˜ - ä¸ç›´æ¥å­˜å‚¨ ElasticSearch æ•°æ®ï¼›ç”±äºæ­¤ä¼˜åŒ–ï¼Œè¯·`category/list`é¦–å…ˆé€šè¿‡è°ƒåº¦ä¸‹è½½ç±»åˆ«åˆ—è¡¨ã€‚

ç±»åˆ«çŠ¶æ€æ•°æ®ï¼š

- `breadcrumbs`- è¿™æ˜¯[é¢åŒ…å±‘ç»„ä»¶](https://github.com/vuestorefront/vue-storefront/blob/master/core/components/Breadcrumbs.js)ä½¿ç”¨çš„è·¯ç”±åˆ—è¡¨[ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/master/core/components/Breadcrumbs.js)
- `current` - è¿™æ˜¯å½“å‰çš„ç±»åˆ«å¯¹è±¡ï¼Œ
- `filters`æ˜¯ç±»åˆ«è¿‡æ»¤å™¨çš„å½“å‰çŠ¶æ€ - æ‰€é€‰å˜ä½“å±æ€§çš„å­—å…¸ï¼›ä¾‹å¦‚ï¼Œå®ƒåŒ…å«é€‰å®šäº§å“å±æ€§çš„å­—å…¸ï¼š

```json
{
  "color": 123,
  "size": 24
}
```

è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ Magento ä¹‹ç±»çš„ EAV å±æ€§ç»“æ„ - æ‰€ä»¥è¿™é‡Œçš„å€¼æ˜¯å±æ€§å€¼ç´¢å¼•è€Œä¸æ˜¯å€¼æœ¬èº«ã€‚è¯·æŸ¥çœ‹[æ•°æ®æ ¼å¼](https://docs.vuestorefront.io/v1/guide/data/elasticsearch.html)ä»¥ä¾›å‚è€ƒ

- `current_path` - è¿™æ˜¯ç±»åˆ«å¯¹è±¡çš„åˆ—è¡¨ï¼šä»å½“å‰ç±»åˆ«åˆ°é¡¶çº§æ ¹ï¼Œ

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#events-3)æ´»åŠ¨

ä»¥ä¸‹äº‹ä»¶æ˜¯ä»`category`å•†åº—å‘å¸ƒçš„ï¼š

- `EventBus.$emit('category-after-single', { category: mainCategory })`- ä»[ç±»åˆ«/å• ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/06fbb89a5a8bc2c607847f65a7bca9ad54ed7146/core/store/modules/category.js#L70)åŠ è½½å•ä¸ªç±»åˆ«åï¼Œ
- `EventBus.$emit('category-after-current', { category: category })`- å½“å‰ç±»åˆ«æ›´æ”¹å - è¿™æ˜¯åç»­`category/single`è¡ŒåŠ¨å‘¼åï¼Œ
- `EventBus.$emit('category-after-reset', { })` - ç±»åˆ«é‡ç½®åï¼ˆä¾‹å¦‚åœ¨ä»ä¸€ä¸ªç±»åˆ«é¡µé¢ç§»åŠ¨åˆ°å¦ä¸€ä¸ªç±»åˆ«çš„è¿‡ç¨‹ä¸­ï¼‰
- `EventBus.$emit('category-after-list', { query: qrObj, sort: sort, size: size, start: start, list: resp })`- æ­¤äº‹ä»¶å‘å‡ºå½“å‰ç±»åˆ«åˆ—è¡¨ï¼Œå› ä¸ºå®ƒç”±`category/list`.

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#actions-6)è¡ŒåŠ¨

è´­ç‰©è½¦å•†åº—æä¾›ä»¥ä¸‹å…¬å…±æ“ä½œï¼š

**`list (context, { parent = null, onlyActive = true, onlyNotEmpty = false, size = 4000, start = 0, sort = 'position:asc' })`**

è¿™æ˜¯åŠ è½½ç±»åˆ«åˆ—è¡¨çš„å…³é”®æ–¹æ³•ã€‚å®ƒè¿”å›`Promise`åŒ…å«äº§å“åˆ—è¡¨å¯¹è±¡çš„ ã€‚è¿™ç§æ–¹æ³•åº”è¯¥åœ¨æ‚¨éœ€è¦è·å–äº§å“æ•°æ®çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨ã€‚

**`single (context, { key, value, setCurrentCategory = true, setCurrentCategoryPath = true })`**

æ­¤æ–¹æ³•ä»`localForage`.

é‡è¦çš„

è¦ä½¿æ­¤æ–¹æ³•èµ·ä½œç”¨ï¼Œæ‚¨åº”è¯¥å…ˆè°ƒç”¨`category/list`ã€‚è¯¥åˆ†ç±»åªå¯¹localFotageæœ‰æ•ˆï¼Œä¸èƒ½ç›´æ¥è®¿é—®ElasticSearch

é‡è¦çš„

æ­¤æ–¹æ³•é€šè¿‡ä»¥ä¸‹æ–¹å¼åŒæ­¥äº§å“ä»¥ä¾›ç¦»çº¿ä½¿ç”¨ï¼šå°†æ•´ä¸ªæŸ¥è¯¢ç»“æœå¯¹è±¡å­˜å‚¨åˆ°`localForage`å¹¶å•ç‹¬ç¼“å­˜æ¯ä¸ªç±»åˆ«ï¼ˆä¾‹å¦‚åœ¨äº§å“é¡µé¢ä¸Šä½¿ç”¨ï¼‰

æ­¤æ–¹æ³•å‘å‡ºç±»åˆ«åˆ—è¡¨ä¸º `EventBus.$emit('category-after-list', { query: qrObj, sort: sort, size: size, start: start, list: resp })`

- `parent`-`category`ä»…åŠ è½½å­ç±»åˆ«çš„å¯¹è±¡
- `start`, `size`- ä¸¤ä¸ªå‚æ•°éƒ½ç”¨äºåˆ†é¡µï¼›start æ˜¯èµ·å§‹ç´¢å¼•ï¼›size æ˜¯é¡µé¢å¤§å°
- `onlyActive` - (bool) ä»…åŠ è½½ CMS ä¸­æ ‡è®°ä¸ºæ´»åŠ¨çš„ç±»åˆ«ï¼ˆä¾‹å¦‚åœ¨ Magento ä¸­ï¼‰
- `sort` - ç”¨äºæ’åºçš„ç±»åˆ«å±æ€§ï¼Œæ­¤å­—æ®µå¿…é¡»åœ¨ ElasticSearch ä¸­æ˜ å°„ä¸ºæ•°å­—å­—æ®µ
- `onlyNotEmpty` - (bool) ä»…åŠ è½½åŒ…å«ä»»ä½•äº§å“çš„ç±»åˆ«

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#getters-4)å¸æ°”å‰‚

æ‰€æœ‰çŠ¶æ€æˆå‘˜éƒ½åº”è¯¥åªèƒ½ç”± getter è®¿é—®ã€‚è¯·æŸ¥çœ‹æ•°æ®æ ¼å¼çš„çŠ¶æ€å‚è€ƒ

```js
const getters = {
  current: state => state.current,
  list: state => state.list,
};
```

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#product-store)äº§å“å•†åº—

Product Store æ—¨åœ¨å¤„ç†ä¸äº§å“æ•°æ®ç›¸å…³çš„æ‰€æœ‰æ“ä½œã€‚å®ƒè´Ÿè´£åŠ è½½äº§å“åˆ—è¡¨æˆ–å•ä¸ªäº§å“ä»¥åŠé…ç½®å¯é…ç½®äº§å“å’Œç®¡ç†äº§å“é™„ä»¶ã€‚

è¯¥æ¨¡å—ä¸ Elastic Search ç´§å¯†é…åˆï¼Œå¹¶åœ¨[Product æ•°æ®æ ¼å¼ä¸Šè¿è¡Œ](https://docs.vuestorefront.io/v1/guide/data/elasticsearch.html)

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#state-6)çŠ¶æ€

```js
const state = {
  breadcrumbs: { routes: [] },
  current: null, // shown product
  current_options: { color: [], size: [] },
  current_configuration: {},
  parent: null,
  list: [],
  original: null, // default, not configured product
  related: {},
};
```

äº§å“çŠ¶æ€é€šå¸¸ä»…ç”±ä¸¤ç§æ–¹æ³•[åˆ—è¡¨](https://github.com/vuestorefront/vue-storefront/blob/bd559f1baad7cd392bc5bae7b935a60484e2e6e5/src/store/modules/product.js#L395)å¡«å……[ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/bd559f1baad7cd392bc5bae7b935a60484e2e6e5/src/store/modules/product.js#L395)å’Œ[å•èº« ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/bd559f1baad7cd392bc5bae7b935a60484e2e6e5/src/store/modules/product.js#L428)å¹¶é€šè¿‡[é‡ç½®](https://github.com/vuestorefront/vue-storefront/blob/bd559f1baad7cd392bc5bae7b935a60484e2e6e5/src/store/modules/product.js#L215)æ¸…é™¤ä¸ºé»˜è®¤å€¼[ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/bd559f1baad7cd392bc5bae7b935a60484e2e6e5/src/store/modules/product.js#L215)

äº§å“çŠ¶æ€æ•°æ®ï¼š

- `breadcrumbs`- è¿™æ˜¯[é¢åŒ…å±‘ç»„ä»¶](https://github.com/vuestorefront/vue-storefront/blob/master/core/components/Breadcrumbs.js)ä½¿ç”¨çš„è·¯ç”±åˆ—è¡¨[ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/master/core/components/Breadcrumbs.js)
- `current`- è¿™æ˜¯å…·æœ‰é€‰å®š`configurable_children`å˜ä½“çš„äº§å“å¯¹è±¡- å› æ­¤å®ƒæ˜¯åŸºæœ¬äº§å“ï¼Œå…¶å±æ€§è¢«é€‰å®š`configurable_children`å˜ä½“çš„å€¼è¦†ç›–ï¼›å®ƒåœ¨[Product.vue é¡µé¢](https://github.com/vuestorefront/vue-storefront/blob/bd559f1baad7cd392bc5bae7b935a60484e2e6e5/src/pages/Product.vue#L203)ä¸Šä½¿ç”¨[ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/bd559f1baad7cd392bc5bae7b935a60484e2e6e5/src/pages/Product.vue#L203)è¿™æ˜¯åœ¨â€œåŠ å…¥è´­ç‰©è½¦â€ååŠ å…¥è´­ç‰©è½¦çš„äº§å“
- `current_options`- å®ƒæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œç”¨äºå¡«å……[Product.vue é¡µé¢](https://github.com/vuestorefront/vue-storefront/blob/bd559f1baad7cd392bc5bae7b935a60484e2e6e5/src/themes/default/pages/Product.vue#L56)ä¸Šçš„å˜ä½“é€‰æ‹©å™¨[ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/bd559f1baad7cd392bc5bae7b935a60484e2e6e5/src/themes/default/pages/Product.vue#L56)å®ƒåŒ…å«å±æ€§ x å¯èƒ½çš„å±æ€§å€¼å’Œæ ‡ç­¾çš„å­—å…¸ï¼Œå¹¶ç”±[setupVariants](https://github.com/vuestorefront/vue-storefront/blob/bd559f1baad7cd392bc5bae7b935a60484e2e6e5/src/store/modules/product.js#L344)å¡«å……[ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/bd559f1baad7cd392bc5bae7b935a60484e2e6e5/src/store/modules/product.js#L344)æ ¹æ®`configurable_children`è´¢äº§
- `current_configuration`æ˜¯å½“å‰äº§å“é…ç½® - æ‰€é€‰å˜ä½“å±æ€§çš„å­—å…¸ï¼›ä¾‹å¦‚ï¼Œå®ƒåŒ…å«é€‰å®šäº§å“å±æ€§çš„å­—å…¸ï¼š

```json
{
  "color": 123,
  "size": 24
}
```

è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ Magento ä¹‹ç±»çš„ EAV å±æ€§ç»“æ„ - æ‰€ä»¥è¿™é‡Œçš„å€¼æ˜¯å±æ€§å€¼ç´¢å¼•è€Œä¸æ˜¯å€¼æœ¬èº«ã€‚è¯·æŸ¥çœ‹[æ•°æ®æ ¼å¼](https://docs.vuestorefront.io/v1/guide/data/elasticsearch.html)ä»¥ä¾›å‚è€ƒ

- `parent`- å¦‚æœå½“å‰äº§å“æ˜¯ä¸€ä¸ªï¼Œ`type_id="single"`åˆ™åœ¨è¿™ä¸ªå˜é‡`configurable`ä¸­å­˜å‚¨çˆ¶äº§å“ã€‚æ­¤æ•°æ®ä»…`Product.vue`ç”±[checkConfigurableParent](https://github.com/vuestorefront/vue-storefront/blob/bd559f1baad7cd392bc5bae7b935a60484e2e6e5/src/store/modules/product.js#L323)å¡«å……[ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/bd559f1baad7cd392bc5bae7b935a60484e2e6e5/src/store/modules/product.js#L323)
- `list`- è¿™æ˜¯ä¸€ä¸ª[åˆ—è¡¨](https://github.com/vuestorefront/vue-storefront/blob/bd559f1baad7cd392bc5bae7b935a60484e2e6e5/src/store/modules/product.js#L395)åŠ è½½çš„äº§å“æ•°ç»„[ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/bd559f1baad7cd392bc5bae7b935a60484e2e6e5/src/store/modules/product.js#L395)
- `original`- ä»…ç”¨äº`configurable`äº§å“ï¼›è¿™æ˜¯æœªé€‰æ‹©å˜ä½“çš„åŸºç¡€äº§å“
- `related`- è¿™æ˜¯ç›¸å…³äº§å“çš„å­—å…¸ï¼›è®¾ç½®åœ¨è¿™å®¶å•†åº—å¤–ï¼ˆ[ä¾‹å¦‚è¿™é‡Œ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/master/src/themes/default/components/core/blocks/Product/Related.vue)) é€šè¿‡è°ƒç”¨å’Œ[ç›¸å…³æ“ä½œï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/bd559f1baad7cd392bc5bae7b935a60484e2e6e5/src/store/modules/product.js#L528)

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#events-4)æ´»åŠ¨

ä»¥ä¸‹äº‹ä»¶æ˜¯ä»`product`å•†åº—å‘å¸ƒçš„ï¼š

- `EventBus.$emit('product-after-priceupdate', product)`- æ¥è‡ª[åŒæ­¥äº§å“ä»·æ ¼ ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/blob/bd559f1baad7cd392bc5bae7b935a60484e2e6e5/src/store/modules/product.js#L33)äº§å“ä»·æ ¼ä¸MagentoåŒæ­¥åï¼›
- `EventBus.$emit('product-after-configure', { product: product, configuration: configuration, selectedVariant: selectedVariant })`from `configureProductAsync`ï¼ˆç”±`product/configure`ä¹‹åçš„åŠ¨ä½œè°ƒç”¨`product/single`ï¼‰ã€‚æ­¤äº‹ä»¶åœ¨äº§å“é¡µé¢ä¸Šæä¾›æœ‰å…³æ‰€é€‰äº§å“å˜ä½“çš„ä¿¡æ¯
- `EventBus.$emit('product-after-list', { query: query, start: start, size: size, sort: sort, entityType: entityType, result: resp })`- æ­¤äº‹ä»¶é€šè¿‡`product/list`æä¾›å½“å‰è¿‡æ»¤å™¨ç­‰è¿”å›å½“å‰äº§å“åˆ—è¡¨ã€‚æ‚¨å¯ä»¥é€šè¿‡è®¾ç½®`meta`å±æ€§æ¥æ ‡è®°ç‰¹å®šçš„äº§å“åˆ—è¡¨æ ‡è¯†ç¬¦ï¼›è¿™å¾ˆé‡è¦ï¼Œå› ä¸ºåœ¨å•ä¸ªé¡µé¢ä¸Šï¼Œæ­¤äº‹ä»¶å¯ä»¥é’ˆå¯¹æ¯ä¸ªå•ç‹¬çš„äº§å“å—æ‰§è¡Œå¤šæ¬¡
- `EventBus.$emit('product-after-single', { key: key, options: options, product: cachedProduct })`- åŠ è½½å•ä¸ªäº§å“åï¼ˆç”±`product/single`æ“ä½œè°ƒç”¨ï¼‰
- `EventBus.$emit('product-after-related', { key: key, items: items })`- æ¯å½“ä¸ºå½“å‰äº§å“è®¾ç½®ç›¸å…³äº§å“å—æ—¶è°ƒç”¨ï¼›key æ˜¯ç›¸å…³å—çš„åç§°ï¼Œitems æ˜¯ç›¸å…³äº§å“
- `EventBus.$emit('product-after-original', { original: product })`-`product/single`æ¯å½“äº§å“åŠ è½½æ—¶è°ƒç”¨
- `EventBus.$emit('product-after-parent', { parent: product })`- é€šè¿‡`product/checkConfigurableParent`æä¾›å½“å‰çš„å•ä¸ªäº§å“å¯é…ç½®çˆ¶çº§ä»å¤–éƒ¨è°ƒç”¨
- `EventBus.$emit('product-after-reset', { })` - äº§å“é‡ç½®åï¼ˆä¾‹å¦‚åœ¨ä»ä¸€ä¸ªäº§å“é¡µé¢ç§»åŠ¨åˆ°å¦ä¸€ä¸ªé¡µé¢çš„è¿‡ç¨‹ä¸­ï¼‰

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#actions-7)è¡ŒåŠ¨

äº§å“å•†åº—æä¾›ä»¥ä¸‹å…¬å…±æ“ä½œï¼š

**`setupBreadcrumbs (context, { product })`**

è¯¥æ–¹æ³•è´Ÿè´£é¡µé¢`state.breadcrumbs`ä¸Šè¦ä½¿ç”¨çš„è®¾ç½®`Product.vue`ã€‚å®ƒæ˜¯ä» è°ƒç”¨çš„`Product.vue:fetchData`ã€‚æ‰€è¿°`product`å‚æ•°æ˜¯ä¸€ä¸ª[ElasticSearchäº§å“å¯¹è±¡](https://docs.vuestorefront.io/v1/guide/data/elasticsearch.html)

**`syncPlatformPricesOver(context, { skus })`**

å½“ config é€‰é¡¹`products.alwaysSyncPlatformPricesOver`æ‰“å¼€æ—¶ï¼ŒVue Storefront å°†åœ¨æ¯æ¬¡è°ƒåº¦`product/single`æˆ–`product/list`æ“ä½œæ—¶è¯·æ±‚å½“å‰äº§å“ä»·æ ¼ã€‚å®ƒç”±è¿™äº›æ“ä½œä¸“é—¨è°ƒç”¨ï¼Œä¸åº”æ‰‹åŠ¨è°ƒç”¨ã€‚æ­¤æ–¹æ³•è°ƒç”¨`vue-storefront-api`ä»£ç†ä» Magento æˆ–ä»»ä½•å…¶ä»–åç«¯ CMS è·å–å½“å‰ä»·æ ¼ã€‚

`skus` - è¿™æ˜¯ä¸€ä¸ªåŒ…å«è¦åŒæ­¥çš„äº§å“ SKU çš„æ•°ç»„

**`setupAssociated (context, { product })`**

æ­¤æ–¹æ³•è¢«ç§°ä¸ºåç»­è°ƒç”¨`Product.vue:fetchData`æˆ–`product/list`æ“ä½œã€‚å®ƒç”¨äºè·å–å­äº§å“`grouped`æˆ–`bundle`äº§å“ç±»å‹ã€‚

**`checkConfigurableParent (context, {product})`**

è°ƒç”¨æ­¤æ–¹æ³•`Product.vue:fetchData`ä»¥æ£€æŸ¥å½“å‰çš„ç®€å•äº§å“æ˜¯å¦å…·æœ‰å¯é…ç½®çš„çˆ¶çº§ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œåˆ™é‡å®šå‘åˆ°çˆ¶äº§å“ã€‚è¿™æ˜¯[#508](https://github.com/vuestorefront/vue-storefront/issues/508)çš„ä¿®å¤[ï¼ˆæ‰“å¼€æ–°çª—å£ï¼‰](https://github.com/vuestorefront/vue-storefront/issues/508)

**`setupVariants (context, { product })`**

æ­¤æ–¹æ³•éšåè¢«è°ƒç”¨`Product.vue:fetchData`ä»¥åŠ è½½ ä¸­å®šä¹‰çš„æ‰€æœ‰å¯é…ç½®å±æ€§`product.configurable_options`ï¼Œç„¶åå¡«å……`state.current_configuration`å’Œ`state.current_options`ã€‚æ­¤åŠ¨ä½œçš„ä¸»è¦ç”¨é€”æ˜¯åœ¨äº§å“é¡µé¢ä¸Šå‡†å¤‡ç”±ç”¨æˆ·é…ç½®çš„äº§å“ï¼Œå¹¶æ­£ç¡®æ˜¾ç¤ºäº§å“é…ç½®å™¨ UI

**`list (context, { query, start = 0, size = 50, entityType = 'product', sort = '', cacheByKey = 'sku', prefetchGroupProducts = true, updateState = true, meta = {} })`**

è¿™æ˜¯åŠ è½½äº§å“åˆ—è¡¨çš„å…³é”®æ–¹æ³•ã€‚å®ƒè¿”å›`Promise`åŒ…å«äº§å“åˆ—è¡¨å¯¹è±¡çš„ ã€‚è¿™ç§æ–¹æ³•åº”è¯¥åœ¨æ‚¨éœ€è¦è·å–äº§å“æ•°æ®çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨ã€‚å½“`config.tax.calculateServerSide=false`æ­¤æ–¹æ³•è¿è¡Œäº§å“ç¨è®¡ç®—å™¨å¹¶æ ¹æ®éœ€è¦ä¸ Magento åŒæ­¥ä»·æ ¼æ—¶ã€‚

æ­¤æ–¹æ³•å°†äº§å“åˆ—è¡¨ä½œä¸º `EventBus.$emit('product-after-list', { query: query, start: start, size: size, sort: sort, entityType: entityType, meta: meta, result: resp })`

é‡è¦çš„

æ­¤æ–¹æ³•é€šè¿‡ä»¥ä¸‹æ–¹å¼åŒæ­¥äº§å“ä»¥ä¾›ç¦»çº¿ä½¿ç”¨ï¼šå°†æ•´ä¸ªæŸ¥è¯¢ç»“æœå¯¹è±¡å­˜å‚¨åˆ°`localForage`å¹¶å•ç‹¬ç¼“å­˜æ¯ä¸ªäº§å“ï¼ˆä¾‹å¦‚åœ¨äº§å“é¡µé¢ä¸Šä½¿ç”¨ï¼‰

- `query`- è¿™æ˜¯`bodybuilder`ElasticSearch æŸ¥è¯¢ï¼ˆè¯·æ£€æŸ¥`bodybuilder`åŒ…æˆ–ä¾‹å¦‚`Home.vue`å‚è€ƒå¦‚ä½•ä½¿ç”¨å®ƒï¼‰
- `start`, `size`- ä¸¤ä¸ªå‚æ•°éƒ½ç”¨äºåˆ†é¡µï¼›start æ˜¯èµ·å§‹ç´¢å¼•ï¼›size æ˜¯é¡µé¢å¤§å°
- `entityType`- é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒå½“ç„¶è®¾ç½®ä¸º`product`å¹¶æ˜ å°„åˆ° ElasticSearch å®ä½“ç±»
- `sort` - ç”¨äºæ’åºçš„äº§å“å±æ€§ï¼Œæ­¤å­—æ®µå¿…é¡»åœ¨ ElasticSearch ä¸­æ˜ å°„ä¸ºæ•°å­—å­—æ®µ
- `prefetchGroupProducts`- é»˜è®¤æƒ…å†µä¸‹å®ƒè®¾ç½®ä¸º true å¹¶å¯¼è‡´`setupAssociated`åˆ†æ´¾æ“ä½œä»¥è·å–æ‰€æœ‰ç›¸å…³äº§å“
- `updateState`- å¦‚æœæ‚¨å°†æ­¤è®¾ç½®ä¸º falseï¼Œ`state.list`åˆ™ä¸ä¼šæ›´æ–° - åªä¼šé€€å›äº§å“
- `meta`- è¿™æ˜¯ä¸€ä¸ªä¸`product-after-list`äº‹ä»¶ä¸€èµ·è¿”å›çš„å¯é€‰å±æ€§ï¼›ä¾‹å¦‚ï¼Œå®ƒå¯ä»¥ç”¨äºæ ‡è®°ä»»ä½•ç‰¹å®šçš„ ES è°ƒç”¨ã€‚

**`single (context, { options, setCurrentProduct = true, selectDefaultVariant = true, key = 'sku' })`**

æ­¤æ–¹æ³•éšåè°ƒåº¦`product/list`æ“ä½œä»¥è·å–äº§å“å¹¶åŒæ­¥ç¨é‡‘/ä»·æ ¼ã€‚å½“æœ€è¿‘é€šè¿‡`product/list`æ­¤æ–¹æ³•ä¸‹è½½äº§å“æ—¶ï¼Œå°†ä»ä¸­è¿”å›ç¼“å­˜ç‰ˆæœ¬`localForage`- ä½†æ— è®ºå¦‚ä½•éƒ½è¦æ›´æ–°ç¼“å­˜ã€‚

**`configure (context, { product = null, configuration, selectDefaultVariant = true })`**

æ­¤æ“ä½œç”¨äºé…ç½®`configurable`å…·æœ‰æŒ‡å®šå±æ€§çš„äº§å“ã€‚å®ƒè·å–`configuration`åº”å…·æœ‰ä»¥ä¸‹æ ¼å¼çš„å¯¹è±¡ï¼š`{ attribute_code: attribute_value_id }`å¹¶æ‰¾åˆ°`product.configurable_children`ç¬¦åˆæ­¤é…ç½®çš„é¡¹ç›®ã€‚ç„¶åå®ƒå°†è¿™ä¸ªç‰¹å®šçš„`configurable_child`ä¸äº§å“æœ¬èº«åˆå¹¶- ä¾‹å¦‚å°† product.price è®¾ç½®ä¸ºå¯é…ç½®çš„ä»·æ ¼ã€é¢œè‰²ã€å°ºå¯¸ç­‰ã€‚è¯¥æ–¹æ³•ç”¨äºï¼š`Product.vue`å…è®¸ç”¨æˆ·é€‰æ‹©é¢œè‰²ã€å°ºå¯¸ç­‰çš„é¡µé¢ã€‚å®ƒçš„ç¬¬äºŒä¸ªç”¨æ³•æ˜¯`Category.vue`é¡µé¢ - åœ¨ç”¨æˆ·é€‰æ‹©ä¸€äº›è¿‡æ»¤å™¨åï¼Œç”Ÿæˆçš„äº§å“è¢«é…ç½®ä¸ºæ˜¾ç¤ºæ­£ç¡®çš„å›¾åƒï¼ˆä¸æ‰€é€‰é¢œè‰²å’Œå°ºå¯¸ç›¸å…³ï¼‰å’Œä»·æ ¼ã€‚

å¦‚æœ`selectDefaultVariant`è®¾ç½®ä¸º trueï¼ˆé»˜è®¤ï¼‰ï¼Œ`state.current`åˆ™å°†æ ¹æ®é…ç½®çš„äº§å“è¿›è¡Œæ›´æ”¹ã€‚

**`setCurrent (context, productVariant)`**

è¾…åŠ©æ–¹æ³•åªæ˜¯è®¾ç½®`state.current`ä¸º productVariant

**`setOriginal (context, originalProduct)`**

è¾…åŠ©æ–¹æ³•åªæ˜¯è®¾ç½®`state.original`ä¸º originalProduct

**`related (context, { key = 'related-products', items })`**

æ›´æ”¹`state.related`å­—å…¸ä»¥è®¾ç½®è¦åœ¨`Product.vue`é¡µé¢ä¸Šæ˜¾ç¤ºçš„ç›¸å…³äº§å“çš„ç‰¹å®šåˆ—è¡¨ï¼ˆ`RelatedProducts`ç»„ä»¶ç”¨äºæ­¤ï¼‰

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#getters-5)å¸æ°”å‰‚

æ‰€æœ‰çŠ¶æ€æˆå‘˜éƒ½åº”è¯¥åªèƒ½ç”± getter è®¿é—®ã€‚è¯·æŸ¥çœ‹æ•°æ®æ ¼å¼çš„çŠ¶æ€å‚è€ƒ

```js
const getters = {
  productParent: state => state.parent,
  productCurrent: state => state.current,
  currentConfiguration: state => state.current_configuration,
  productOriginal: state => state.original,
  currentOptions: state => state.current_options,
  breadcrumbs: state => state.breadcrumbs,
};
```

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#stock-store)åº“å­˜å•†åº—

Stock Store æ—¨åœ¨å¤„ç†åº“å­˜æ•°é‡æ£€æŸ¥ã€‚

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#events-5)æ´»åŠ¨

ä»¥ä¸‹äº‹ä»¶æ˜¯ä»`stock`å•†åº—å‘å¸ƒçš„ï¼š

- `stock-after-check` - åœ¨ä»ç”µå­å•†åŠ¡åç«¯/ Magento æ”¶åˆ°åº“å­˜å•†å“åç«‹å³å‘å‡º

##### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#actions-8)è¡ŒåŠ¨

è´­ç‰©è½¦å•†åº—æä¾›ä»¥ä¸‹å…¬å…±æ“ä½œï¼š

**`check (context, { product, qty = 1 })`**

æ£€æŸ¥æ˜¯å¦`product`å¯ä»¥å°†ç»™å®šæ•°é‡çš„å•†å“æ·»åŠ åˆ°è´­ç‰©è½¦ä¸­ã€‚

ç”Ÿæˆçš„ promise æ‰©å±•ä¸ºä»¥ä¸‹å¯¹è±¡ï¼š

```js
{
  qty: 100,
  status: 'ok', // another option is: 'out_of_stock'
  onlineCheckTaskId: 14241
}
```

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#tax-store)ç¨åŠ¡å•†åº—

### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#helpers)å¸®æ‰‹

#### [#](https://docs.vuestorefront.io/v1/guide/archives/modules.html#optionlabel)é€‰é¡¹æ ‡ç­¾

ç”¨äºè·å–ç‰¹å®š çš„æ ‡ç­¾`optionId`ã€‚ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·è¿‡æ»¤äº§å“å¹¶ä½¿ç”¨ 165 ä¸ª attribute_value æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨`optionLabel( { attributeKey: 'color', optionId: 165 })`ä»¥å–å› 'Red' æ ‡ç­¾ã€‚

